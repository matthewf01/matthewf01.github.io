<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SS - Review Game</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <style>
        html {
            height: 100%;
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f0f0;
            background-image:
                radial-gradient(at 0% 0%, hsla(200, 95%, 85%, 1) 0px, transparent 50%),
                radial-gradient(at 100% 0%, hsla(340, 95%, 85%, 1) 0px, transparent 50%),
                radial-gradient(at 0% 100%, hsla(100, 95%, 85%, 1) 0px, transparent 50%),
                radial-gradient(at 100% 100%, hsla(290, 95%, 85%, 1) 0px, transparent 50%);
        }

        .font-title {
            font-family: 'Playfair Display', serif;
        }

        .flash-correct {
            animation: flash-green 0.7s;
        }
        .flash-incorrect {
            animation: flash-red 0.7s;
        }
        @keyframes flash-green {
            from { background-color: #4ade80; } /* Lighter green */
        }
        @keyframes flash-red {
            from { background-color: #f87171; } /* Lighter red */
        }

        #study-guide-content {
            overflow: hidden;
            transition: max-height 0.5s ease-out, opacity 0.5s ease-out, margin-top 0.5s ease-out, padding-top 0.5s ease-out;
            max-height: 0;
            opacity: 0;
            margin-top: 0;
            padding-top: 0;
            border-width: 0;
        }
        #study-guide-content.expanded {
            max-height: 1500px; /* A large enough value to not clip content */
            opacity: 1;
            margin-top: 1.5rem; /* 6 */
            padding-top: 1.5rem; /* 6 */
            border-width: 2px 0 0 0; /* border-t-2 */
        }
        .rainbow-btn {
            background-image: linear-gradient(to right, #ef4444, #f97316, #eab308, #84cc16, #22c55e, #14b8a6, #06b6d4, #3b82f6, #8b5cf6, #d946ef);
            background-size: 200% auto;
            transition: background-position 0.5s ease-in-out;
        }
        .rainbow-btn:hover {
            background-position: right center;
        }

        #info-btn, #resume-quiz-btn, #next-btn, #continue-round-btn {
            background-size: 200% auto;
            transition: background-position 0.4s ease-in-out;
        }
        #info-btn:hover, #resume-quiz-btn:hover, #next-btn:hover, #continue-round-btn:hover {
            background-position: right center;
        }

        #confetti-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 100;
        }
        .glass-effect {
             background-color: rgba(255, 255, 255, 0.6);
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
        }
        #break-canvas {
            touch-action: none;
            cursor: pointer;
        }
        #study-guide-modal-content {
            max-height: 80vh;
        }
    </style>
</head>
<body class="flex flex-col items-center justify-start pt-16 px-4 pb-4 min-h-screen">

    <div id="floating-title" class="w-full max-w-4xl mx-auto bg-white/90 backdrop-blur-sm rounded-2xl shadow-lg p-3 text-center mb-4 hidden">
        <h1 id="unit-title-text" class="text-2xl font-bold text-purple-600"></h1>
    </div>

    <div id="game-container" class="w-full max-w-4xl mx-auto rounded-2xl shadow-lg p-6 md:p-8 relative glass-effect">
        <canvas id="confetti-canvas"></canvas>
        
        <!-- Main Menu Screen -->
        <div id="main-menu-screen" class="text-center">
            <h1 class="font-title text-4xl md:text-5xl font-bold text-purple-600 mb-2">Anleigh's Social Studies Review</h1>
            <p class="text-gray-600 mb-8">Choose a unit below to play a game!</p>
            <div id="unit-selection-container" class="space-y-4 rounded-2xl p-6">
                <div class="grid grid-cols-[minmax(0,_1fr)_auto_auto] gap-4 px-4 pb-2 border-b-2 font-bold text-gray-600 border-gray-200">
                    <div class="text-left">Unit</div>
                    <div class="text-center">Study Guide</div>
                    <div class="text-center">Play Game</div>
                </div>
                <div id="unit-selection" class="space-y-2">
                    <!-- Unit selection buttons will be populated here -->
                </div>
            </div>
             <div class="mt-8 pt-4 border-t-2 border-gray-200">
                <button id="resume-exam-btn" class="hidden w-full text-white font-bold py-3 px-6 rounded-lg text-lg transform hover:scale-105 bg-gradient-to-r from-blue-500 to-indigo-600 mb-4 shadow-lg border-2 border-indigo-300">
                    Resume Final Exam
                </button>
                <button id="final-exam-btn" class="w-full text-white font-bold py-3 px-6 rounded-lg text-lg transform hover:scale-105 rainbow-btn">
                    Start New Final Exam (All Units)
                </button>
                <p id="final-exam-high-score" class="text-sm text-gray-500 mt-2 hidden">High Score: <span></span></p>
            </div>
        </div>

        <!-- Quiz Screen -->
        <div id="quiz-screen" class="hidden">
            <div class="flex justify-between items-center mb-4">
                 <div class="flex items-center gap-4">
                    <button id="back-to-menu-btn-quiz" title="Save & Exit" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold p-2 rounded-full transition duration-300">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                        </svg>
                    </button>
                    <div>
                        <p id="question-counter-display" class="text-gray-500 text-sm">Question <span id="question-number"></span> of <span id="total-questions"></span></p>
                        <p class="text-purple-600 font-semibold">Score: <span id="score">0</span></p>
                    </div>
                </div>
                 <button id="info-btn" class="bg-gradient-to-r from-pink-700 via-purple-700 to-blue-700 text-white font-bold py-2 px-4 rounded-lg transition duration-300">
                    Toggle Study Guide
                </button>
            </div>
            <div class="bg-gray-100 p-4 rounded-lg mb-6">
                <p id="question-reference" class="text-xs text-gray-500 mb-2 font-medium uppercase tracking-wide"></p>
                <div id="question-container" class="flex items-center justify-between gap-2">
                    <h2 id="question-text" class="text-xl md:text-2xl font-semibold text-gray-800 flex-grow"></h2>
                </div>
            </div>
            <div id="answer-buttons" class="grid grid-cols-1 gap-4"></div>
            <div id="feedback" class="mt-6 text-center font-bold text-lg"></div>

            <button id="next-btn" class="w-full mt-6 text-white font-bold py-3 px-6 rounded-lg hidden rainbow-btn">
                Next Question
            </button>
            
            <div id="study-guide-content" class="pt-6 border-t-2 border-gray-200"></div>
        </div>
        
        <!-- Round Summary Screen (For Final Exam Batches) -->
        <div id="round-summary-screen" class="hidden text-center p-4">
            <h2 class="text-3xl font-bold text-indigo-600 mb-4">Round Complete!</h2>
            <div class="bg-indigo-50 rounded-xl p-6 mb-8">
                <p class="text-gray-600 text-lg mb-2">Questions Completed So Far</p>
                <p id="round-progress-text" class="text-4xl font-bold text-indigo-800 mb-4">20 / 100</p>
                <p class="text-gray-600 text-lg mb-2">Current Score</p>
                <p id="round-score-text" class="text-4xl font-bold text-green-600">85%</p>
            </div>
            <p class="text-gray-500 italic mb-8">Progress has been saved automatically.</p>
            <div class="space-y-4">
                <button id="continue-round-btn" class="w-full text-white font-bold py-3 px-6 rounded-lg text-lg rainbow-btn transform hover:scale-105">
                    Continue to Next Round
                </button>
                <button id="save-quit-btn" class="w-full bg-gray-200 hover:bg-gray-300 text-gray-700 font-bold py-3 px-6 rounded-lg text-lg transition">
                    Save & Return to Menu
                </button>
            </div>
        </div>

        <!-- Brain Break Screen -->
        <div id="brain-break-screen" class="hidden text-center">
            <h2 class="text-3xl font-bold text-pink-500 mb-2">Brain Break!</h2>
            <p id="break-instructions" class="text-gray-600 mb-4">Relax for a moment.</p>
            <canvas id="break-canvas" class="bg-white rounded-lg shadow-inner border-2 border-gray-200 mx-auto" width="500" height="300"></canvas>
            <p id="timer-display" class="text-lg text-gray-700 my-4 font-semibold"></p>
            <button id="resume-quiz-btn" class="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-6 rounded-lg text-lg">
                Continue Quiz!
            </button>
        </div>

        <!-- End Screen -->
        <div id="end-screen" class="hidden text-center">
             <h1 class="text-3xl md:text-4xl font-bold text-purple-600 mb-4">Quiz Complete!</h1>
             <p class="text-gray-700 text-xl mb-2">Your Final Score is:</p>
             <p id="final-score" class="text-6xl font-extrabold text-green-500 mb-8"></p>
             <p id="end-message" class="text-lg text-gray-600 mt-4 mb-8"></p>
             <button id="back-to-menu-btn" class="w-full bg-purple-500 hover:bg-purple-600 text-white font-bold py-3 px-6 rounded-lg text-lg transition duration-300 transform hover:scale-105">
                Back to Main Menu
             </button>
        </div>
    </div>
    
    <!-- Study Guide Modal -->
    <div id="study-guide-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden z-50">
        <div class="bg-white rounded-2xl shadow-2xl w-full max-w-4xl p-6 relative">
             <h2 id="modal-title" class="text-3xl font-bold text-purple-700 text-center mb-4">Study Guide</h2>
             <div id="study-guide-modal-content" class="overflow-y-auto">
                <!-- Study guide content will be injected here -->
             </div>
             <button id="close-modal-btn" class="absolute top-4 right-4 bg-red-500 hover:bg-red-600 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold text-lg">
                &times;
            </button>
        </div>
    </div>

    <footer class="fixed bottom-4 right-4 flex items-center gap-4 text-xs text-gray-600">
        <button id="sound-toggle" class="bg-white hover:bg-gray-100 border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500">
            <svg id="sound-on-icon" class="w-5 h-5 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"></path></svg>
            <svg id="sound-off-icon" class="w-5 h-5 text-gray-700 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15zM17 14l2-2m0 0l2-2m-2 2l-2 2m2-2l2 2"></path></svg>
        </button>
        <span>MF Build: 260113.02</span>
    </footer>

    <!-- Audio Elements -->
    <audio id="correct-sound"></audio>
    <audio id="incorrect-sound"></audio>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const gameData = {
                unit1: {
                    title: "Unit 1: Georgia's Beginnings",
                    questions: [
                        { question: "In which two hemispheres is Georgia located?", reference: "AKS 30.a: Georgia's Location", answers: [{ text: "Northern and Eastern", correct: false }, { text: "Northern and Western", correct: true }, { text: "Southern and Western", correct: false }], highlightTerm: "Northern and Western" },
                        { question: "Which geographic region is the smallest and located in the 'TAG corner' of Georgia?", reference: "AKS 30.b: Geographic Regions", answers: [{ text: "Blue Ridge", correct: false }, { text: "Appalachian Plateau", correct: true }, { text: "Piedmont", correct: false }], highlightTerm: "Appalachian Plateau" },
                        { question: "Dalton, the 'carpet capital of the world', is located in which region?", reference: "AKS 30.b: Geographic Regions", answers: [{ text: "Coastal Plain", correct: false }, { text: "Ridge and Valley", correct: true }, { text: "Blue Ridge", correct: false }], highlightTerm: "Ridge and Valley" },
                        { question: "Which region contains Georgia's highest peak, Brasstown Bald, and receives the most rainfall?", reference: "AKS 30.b: Geographic Regions", answers: [{ text: "Piedmont", correct: false }, { text: "Blue Ridge", correct: true }, { text: "Appalachian Plateau", correct: false }], highlightTerm: "Blue Ridge" },
                        { question: "What does the word 'Piedmont' mean, which describes its gently rolling hills?", reference: "AKS 30.b: Geographic Regions", answers: [{ text: "'Red Clay'", correct: false }, { text: "'Foot of the hills'", correct: true }, { text: "'High mountains'", correct: false }], highlightTerm: "Piedmont" },
                        { question: "Which region is the most populated and contains Atlanta?", reference: "AKS 30.b: Geographic Regions", answers: [{ text: "Coastal Plain", correct: false }, { text: "Piedmont", correct: true }, { text: "Blue Ridge", correct: false }], highlightTerm: "Piedmont" },
                        { question: "Which region is the largest by land area and is the agricultural heartland of the state?", reference: "AKS 30.b: Geographic Regions", answers: [{ text: "Piedmont", correct: false }, { text: "Coastal Plain", correct: true }, { text: "Ridge and Valley", correct: false }], highlightTerm: "Coastal Plain" },
                        { question: "What natural boundary separates the Piedmont and Coastal Plain regions?", reference: "AKS 30.c: Physical Features", answers: [{ text: "Savannah River", correct: false }, { text: "The Fall Line", correct: true }, { text: "Appalachian Mountains", correct: false }], highlightTerm: "Fall Line" },
                        { question: "What is the primary function of the barrier islands?", reference: "AKS 30.c: Physical Features", answers: [{ text: "To provide agricultural land", correct: false }, { text: "To protect the mainland from hurricane erosion", correct: true }, { text: "To serve as a source of freshwater", correct: false }], highlightTerm: "Barrier Islands" },
                        { question: "Which river forms the border between Georgia and Alabama?", reference: "AKS 30.c: Physical Features", answers: [{ text: "Savannah River", correct: false }, { text: "Chattahoochee River", correct: true }, { text: "Ocmulgee River", correct: false }], highlightTerm: "Chattahoochee River" },
                        { question: "Which river forms the border between Georgia and South Carolina?", reference: "AKS 30.c: Physical Features", answers: [{ text: "St. Marys River", correct: false }, { text: "Savannah River", correct: true }, { text: "Chattahoochee River", correct: false }], highlightTerm: "Savannah River" },
                        { question: "Why did many of Georgia's early cities, like Augusta and Macon, develop along the Fall Line?", reference: "AKS 30.d: Importance of Water", answers: [{ text: "The area had the best climate for farming", correct: false }, { text: "Rivers provided hydropower for mills and waterfalls blocked ships", correct: true }, { text: "It was the only area free from American Indian tribes", correct: false }], highlightTerm: "Fall Line" },
                        { question: "What was the dominant crop for the Mississippian Indians?", reference: "AKS 31.a: Mississippian Indians", answers: [{ text: "Cotton", correct: false }, { text: "Maize (corn)", correct: true }, { text: "Peanuts", correct: false }], highlightTerm: "Maize (corn)" },
                        { question: "What kind of shelters did the Mississippian Indians use?", reference: "AKS 31.a: Mississippian Indians", answers: [{ text: "Log cabins", correct: false }, { text: "Wattle and daub shelters", correct: true }, { text: "Teepees", correct: false }], highlightTerm: "wattle & daub" },
                        { question: "What were the '3 G's' that motivated Spanish exploration?", reference: "AKS 31.b: European Motives", answers: [{ text: "Grains, Guns, and Galleons", correct: false }, { text: "God, Gold, and Glory", correct: true }, { text: "Geography, Government, and Growth", correct: false }], highlightTerm: "God, Gold, and Glory" },
                        { question: "What was the primary reason for British interest in settling North America?", reference: "AKS 31.b: European Motives", answers: [{ text: "To find a new route to Asia", correct: false }, { text: "To support the economic policy of mercantilism", correct: true }, { text: "To learn from the American Indians", correct: false }], highlightTerm: "mercantilism" },
                        { question: "What was the most devastating impact of European contact, especially from Hernando de Soto's exploration, on the American Indians?", reference: "AKS 31.c: Spanish Impact", answers: [{ text: "They lost their land to new forts", correct: false }, { text: "Diseases like smallpox wiped out much of their population", correct: true }, { text: "They were forced to learn Spanish", correct: false }], highlightTerm: "diseases such as smallpox" },
                        { question: "What was the main purpose of the Spanish missions established on Georgia's barrier islands?", reference: "AKS 31.c: Spanish Impact", answers: [{ text: "To trade for furs and gold", correct: false }, { text: "To convert American Indians to Christianity (Catholicism)", correct: true }, { text: "To create military bases against the British", correct: false }], highlightTerm: "Spanish missions" },
                        { question: "Which of these is NOT one of Georgia's four main transportation systems?", reference: "AKS 49: Transportation Systems", answers: [{ text: "Deepwater Ports", correct: false }, { text: "Subway Systems", correct: true }, { text: "Interstate Highway System", correct: false }], highlightTerm: "four transportation systems" },
                        { question: "Which Georgia airport is known as the busiest in the world?", reference: "AKS 49: Transportation Systems", answers: [{ text: "DeKalb-Peachtree Airport", correct: false }, { text: "Hartsfield-Jackson International Airport", correct: true }, { text: "Savannah/Hilton Head International", correct: false }], highlightTerm: "Hartsfield-Jackson International Airport" },
                    ],
                    studyGuideHTML: `
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="bg-blue-100 p-4 rounded-lg space-y-3 text-sm">
                                <h3 class="font-bold text-blue-800 text-lg">AKS 30.a: Georgia's Location</h3>
                                <p class="text-gray-700">Georgia is in the <strong>Northern and Western</strong> hemispheres, on the continent of <strong>North America</strong>, in the nation of the <strong>United States of America</strong>, in the <strong>Southeast</strong> region.</p>
                                <h3 class="font-bold text-blue-800 text-lg mt-4">AKS 30.b: Geographic Regions</h3>
                                <ul class="list-disc list-inside ml-4 text-gray-700">
                                    <li><strong>Appalachian Plateau:</strong> Smallest region (TAG corner). Economy based on tourism and forestry.</li>
                                    <li><strong>Ridge and Valley:</strong> Known for long ridges and fertile valleys. Economy based on textiles and carpet (Dalton).</li>
                                    <li><strong>Blue Ridge:</strong> Contains the highest peaks (Brasstown Bald) and gets the most rain. Source of major rivers.</li>
                                    <li><strong>Piedmont:</strong> Most populated region, with rolling hills and red clay. Means "foot of the hills". Diverse economy.</li>
                                    <li><strong>Coastal Plain:</strong> Largest region (60% of state). Agricultural heartland.</li>
                                </ul>
                            </div>
                            <div class="bg-green-100 p-4 rounded-lg space-y-3 text-sm">
                                <h3 class="font-bold text-green-800 text-lg">AKS 30.c: Physical Features</h3>
                                 <ul class="list-disc list-inside ml-4 text-gray-700">
                                    <li><strong>Fall Line:</strong> Separates Piedmont and Coastal Plain.</li>
                                    <li><strong>Okefenokee Swamp:</strong> Largest freshwater swamp in North America.</li>
                                    <li><strong>Chattahoochee River:</strong> Forms Georgia's western border with Alabama.</li>
                                    <li><strong>Savannah River:</strong> Forms Georgia's eastern border with South Carolina.</li>
                                    <li><strong>Barrier Islands:</strong> Protect the mainland from hurricanes and erosion.</li>
                                </ul>
                                <h3 class="font-bold text-green-800 text-lg mt-4">AKS 30.d: Importance of Water</h3>
                                <p class="text-gray-700">Rivers (like at the <strong>Fall Line</strong>) and ports are vital for transportation, drinking water, power, and recreation, shaping historical settlement and economic growth.</p>
                            </div>
                            <div class="bg-yellow-100 p-4 rounded-lg space-y-3 text-sm">
                                <h3 class="font-bold text-yellow-800 text-lg">AKS 31: Early Inhabitants & Exploration</h3>
                                <p class="text-gray-700"><strong>Mississippian Indians (AKS 31.a):</strong> Lived in large villages with mounds. They were farmers, with <strong>Maize (corn)</strong> as their main crop. Used bow & arrow and lived in <strong>wattle & daub</strong> shelters.</p>
                                <p class="text-gray-700"><strong>European Motives (AKS 31.b):</strong> Spanish sought <strong>God, Gold, and Glory</strong>. British sought economic gain through <strong>mercantilism</strong>.</p>
                                <p class="text-gray-700"><strong>Spanish Impact (AKS 31.c):</strong> Hernando de Soto's exploration led to the death of many natives from <strong>diseases such as smallpox</strong>. <strong>Spanish missions</strong> were built on the barrier islands to convert natives to Christianity.</p>
                            </div>
                             <div class="bg-red-100 p-4 rounded-lg space-y-3 text-sm">
                                <h3 class="font-bold text-red-800 text-lg">AKS 49: Transportation Systems</h3>
                                <p class="text-gray-700"><strong>Four Systems:</strong> Interstate Highway System, <strong>Hartsfield-Jackson International Airport</strong>, Deepwater Ports (Savannah, Brunswick), and Railroads.</p>
                                <p class="text-gray-700"><strong>Economic Impact:</strong> These systems work together to move goods and people, providing jobs and connecting Georgia to the global economy.</p>
                            </div>
                        </div>`
                },
                unit2: {
                    title: "Unit 2: Georgia's Government",
                    questions: [
                        { question: "What is the primary role of the Judicial Branch?", reference: "AKS 43.b: Checks & Balances", answers: [{ text: "To make laws", correct: false }, { text: "To enforce laws", correct: false }, { text: "To interpret laws and declare them unconstitutional", correct: true }], highlightTerm: "Judicial Branch" },
                        { question: "What can the Legislative Branch do if the Governor vetoes a bill?", reference: "AKS 43.b: Checks & Balances", answers: [{ text: "Nothing, the bill is dead", correct: false }, { text: "Override the veto with a 2/3 vote", correct: true }, { text: "Ask the citizens to vote", correct: false }], highlightTerm: "override the Governorâ€™s veto" },
                        { question: "Paying taxes, obeying laws, and serving on juries are examples of citizen...", reference: "AKS 43.c: Citizen Responsibilities", answers: [{ text: "Rights", correct: false }, { text: "Responsibilities", correct: true }, { text: "Privileges", correct: false }], highlightTerm: "Responsibilities of citizens" },
                        { question: "What are the three principles in Georgia's Pledge of Allegiance?", reference: "AKS 43.e: State Pledge", answers: [{ text: "Liberty, Equality, Fraternity", correct: false }, { text: "Life, Liberty, Property", correct: false }, { text: "Wisdom, Justice, and Moderation", correct: true }], highlightTerm: "Wisdom, Justice, and Moderation" },
                        { question: "How old must you be to vote in Georgia?", reference: "AKS 43.d: Voting Qualifications", answers: [{ text: "16", correct: false }, { text: "18", correct: true }, { text: "21", correct: false }], highlightTerm: "18 years of age" },
                        { question: "What is the name of Georgia's legislative branch?", reference: "AKS 44: Legislative Branch", answers: [{ text: "Congress", correct: false }, { text: "The General Assembly", correct: true }, { text: "Parliament", correct: false }], highlightTerm: "General Assembly" },
                        { question: "How old must a person be to become a State Senator in Georgia?", reference: "AKS 44.a: Qualifications", answers: [{ text: "21", correct: false }, { text: "25", correct: true }, { text: "30", correct: false }], highlightTerm: "at least 25 years old" },
                        { question: "How long is the term for a member of the General Assembly?", reference: "AKS 44.a: Qualifications", answers: [{ text: "2-year term", correct: true }, { text: "4-year term", correct: false }, { text: "6-year term", correct: false }], highlightTerm: "Serve 2-year term" },
                        { question: "Who presides over the Georgia State Senate?", reference: "AKS 44.b: General Assembly Organization", answers: [{ text: "The Governor", correct: false }, { text: "The Speaker of the House", correct: false }, { text: "The Lieutenant Governor", correct: true }], highlightTerm: "Lieutenant Governor" },
                        { question: "Most of the work done in the General Assembly takes place in...", reference: "AKS 44.b: General Assembly Organization", answers: [{ text: "The Governor's office", correct: false }, { text: "Committees", correct: true }, { text: "Public forums", correct: false }], highlightTerm: "committees" },
                        { question: "What percentage of votes is needed for a bill to pass in the General Assembly?", reference: "AKS 44.c: Lawmaking Process", answers: [{ text: "A 2/3 majority", correct: false }, { text: "A simple majority (51%)", correct: true }, { text: "A 3/4 majority", correct: false }], highlightTerm: "51% majority" },
                        { question: "What happens if the Governor does not sign or veto a bill?", reference: "AKS 44.c: Lawmaking Process", answers: [{ text: "It becomes law automatically", correct: true }, { text: "It is sent back to the committee", correct: false }, { text: "The bill dies", correct: false }], highlightTerm: "It becomes law" },
                        { question: "What is the main purpose of Georgia's Executive Branch?", reference: "AKS 45: Executive Branch", answers: [{ text: "To make laws", correct: false }, { text: "To interpret laws", correct: false }, { text: "To enforce laws", correct: true }], highlightTerm: "Enforcing state laws" },
                        { question: "What are the qualifications to be Governor of Georgia?", reference: "AKS 45.a: Governor Qualifications", answers: [{ text: "25 years old, US citizen for 10 years", correct: false }, { text: "30 years of age, GA resident for 6 years, US Citizen for 15 years", correct: true }, { text: "35 years old, born in Georgia", correct: false }], highlightTerm: "30 years of age" },
                        { question: "Which branch of government is the largest in the state?", reference: "AKS 45.b: State Agencies", answers: [{ text: "Legislative Branch", correct: false }, { text: "Judicial Branch", correct: false }, { text: "Executive Branch", correct: true }], highlightTerm: "executive branch is the largest" }
                    ],
                    studyGuideHTML: `
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="bg-blue-100 p-4 rounded-lg space-y-3 text-sm">
                                <h3 class="font-bold text-blue-800 text-lg">AKS 43: Government Basics</h3>
                                <p class="text-gray-700"><strong>Checks & Balances (43.b):</strong> Each branch can limit the others. (e.g., Governor can veto, but legislature can <strong>override</strong>. The Judicial Branch can declare laws unconstitutional).</p>
                                <p class="text-gray-700"><strong>Pledge Principles (43.e):</strong> Wisdom, Justice, and Moderation.</p>
                                <p class="text-gray-700"><strong>Citizen Responsibilities (43.c):</strong> Paying taxes, serving on juries, obeying laws, voting.</p>
                                <p class="text-gray-700"><strong>Voting Qualifications (43.d):</strong> Must be a U.S. citizen, a resident of GA, and <strong>18 years of age</strong>.</p>
                            </div>
                            <div class="bg-yellow-100 p-4 rounded-lg space-y-3 text-sm">
                                <h3 class="font-bold text-yellow-800 text-lg">AKS 44: Legislative Branch</h3>
                                <p class="text-gray-700"><strong>General Assembly:</strong> Makes laws. Made of House of Reps & Senate. Meets for 40 work days. Bills need a <strong>51% majority</strong> to pass. Can override a veto with a 2/3 vote.</p>
                                <p class="text-gray-700"><strong>Qualifications (44.a):</strong> Reps must be 21; Senators must be <strong>at least 25 years old</strong>. Both serve a <strong>2-year term</strong>.</p>
                                <p class="text-gray-700"><strong>Organization (44.b):</strong> <strong>Lieutenant Governor</strong> presides over Senate. Most work is done in <strong>committees</strong>.</p>
                                <p class="text-gray-700"><strong>Lawmaking (44.c):</strong> If the Governor doesn't sign or veto, a bill <strong>becomes law</strong> automatically.</p>
                            </div>
                            <div class="bg-green-100 p-4 rounded-lg space-y-3 text-sm md:col-span-2">
                                <h3 class="font-bold text-green-800 text-lg">AKS 45: Executive Branch</h3>
                                <p class="text-gray-700"><strong>Role:</strong> <strong>Enforcing state laws</strong>. It is the largest branch. Headed by the Governor.</p>
                                <p class="text-gray-700"><strong>Governor Qualifications (45.a):</strong> Must be <strong>30 years of age</strong>, a GA resident for 6 years, and a US Citizen for 15 years.</p>
                                <p class="text-gray-700"><strong>State Agencies (45.b):</strong> The <strong>executive branch is the largest</strong> in the state because it includes numerous agencies that administer programs and enforce laws.</p>
                            </div>
                        </div>`
                },
                unit3: {
                    title: "Unit 3: Judicial & Local Government",
                    questions: [
                        { question: "What is the highest court in Georgia's judicial branch?", reference: "AKS 46: Judicial Branch", answers: [{ text: "Superior Court", correct: false }, { text: "Georgia's Supreme Court", correct: true }, { text: "Court of Appeals", correct: false }], highlightTerm: "Georgia's Supreme Court" },
                        { question: "What is the main role of the Georgia Supreme Court regarding laws and actions?", reference: "AKS 46: Judicial Branch", answers: [{ text: "To create new laws", correct: false }, { text: "To determine if they are constitutional", correct: true }, { text: "To enforce the laws", correct: false }], highlightTerm: "constitutional" },
                        { question: "How are Georgia's Supreme Court justices selected?", reference: "AKS 46: Judicial Branch", answers: [{ text: "They are appointed by the Governor", correct: false }, { text: "They are elected in a state-wide election", correct: true }, { text: "They are chosen by the General Assembly", correct: false }], highlightTerm: "elected in a state-wide election" },
                        { question: "Disputes between people, such as lawsuits, are handled by which type of law?", reference: "AKS 46: Judicial Branch", answers: [{ text: "Criminal Law", correct: false }, { text: "Civil Law", correct: true }, { text: "Constitutional Law", correct: false }], highlightTerm: "Civil" },
                        { question: "The step in the adult criminal justice process where the accused is formally charged is called...", reference: "AKS 46: Judicial Branch", answers: [{ text: "Booking", correct: false }, { text: "Trial", correct: false }, { text: "Charging (Indicting)", correct: true }], highlightTerm: "Charging (formal word is Indicting)" },
                        { question: "In Georgia, a person under what age is considered a juvenile?", reference: "AKS 47: Juvenile Justice", answers: [{ text: "18", correct: false }, { text: "17", correct: true }, { text: "16", correct: false }], highlightTerm: "under 17 years old" },
                        { question: "What is the main goal of the juvenile court system?", reference: "AKS 47: Juvenile Justice", answers: [{ text: "To punish youth offenders", correct: false }, { text: "To protect and rehabilitate", correct: true }, { text: "To set an example for other teens", correct: false }], highlightTerm: "protect and rehabilitate" },
                        { question: "An act that would NOT be a crime if committed by an adult, like skipping school, is called a...", reference: "AKS 47: Juvenile Justice", answers: [{ text: "Delinquent act", correct: false }, { text: "Unruly act (Status Offense)", correct: true }, { text: "Misdemeanor", correct: false }], highlightTerm: "Unruly (Status Offense)" },
                        { question: "What is the first step in the juvenile justice process after a juvenile is taken into custody?", reference: "AKS 47: Juvenile Justice", answers: [{ text: "Adjudicatory Hearing", correct: false }, { text: "Intake", correct: true }, { text: "Sentencing", correct: false }], highlightTerm: "Intake" },
                        { question: "Which government is established by a Municipal Charter to provide services like police and trash pickup?", reference: "AKS 48: Local Government", answers: [{ text: "County", correct: false }, { text: "City (Municipality)", correct: true }, { text: "Special-Purpose", correct: false }], highlightTerm: "City (Municipality)" },
                        { question: "Which government is mandated by the state constitution to carry out state programs?", reference: "AKS 48: Local Government", answers: [{ text: "City", correct: false }, { text: "County", correct: true }, { text: "Special-Purpose", correct: false }], highlightTerm: "County" },
                        { question: "A school district or MARTA is an example of what kind of government?", reference: "AKS 48: Local Government", answers: [{ text: "City", correct: false }, { text: "County", correct: false }, { text: "Special-Purpose", correct: true }], highlightTerm: "Special-Purpose" },
                        { question: "What type of tax is the main source of revenue for local governments, based on the value of property?", reference: "AKS 48: Local Government", answers: [{ text: "Sales Tax", correct: false }, { text: "Ad Valorem (Property) Tax", correct: true }, { text: "Income Tax", correct: false }], highlightTerm: "Ad Valorem (Property) Taxes" },
                    ],
                    studyGuideHTML: `
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="bg-blue-100 p-4 rounded-lg space-y-3 text-sm">
                                <h3 class="font-bold text-blue-800 text-lg mb-2 border-b-2 border-blue-200 pb-2">AKS 46: Judicial Branch</h3>
                                <p class="text-gray-700"><strong class="font-semibold text-blue-700">Highest Court:</strong> Georgia's Supreme Court</p>
                                <p class="text-gray-700"><strong class="font-semibold text-blue-700">Supreme Court's Role:</strong> To determine if actions are constitutional and interpret laws.</p>
                                <p class="text-gray-700"><strong class="font-semibold text-blue-700">Justice Elections:</strong> Justices are elected in a state-wide election for a 6-year term.</p>
                                <div class="text-gray-700"><strong class="font-semibold text-blue-700">Types of Law:</strong><ul class="list-disc list-inside mt-1 pl-2"><li><strong>Civil:</strong> Disputes between people (e.g., lawsuits).</li><li><strong>Criminal:</strong> Deals with violations of the law (felonies and misdemeanors).</li></ul></div>
                                <div class="text-gray-700"><strong class="font-semibold text-blue-700">Adult Criminal Justice Steps:</strong><ol class="list-decimal list-inside mt-1 pl-2"><li>Arrest</li><li>Booking</li><li>Charging (formal word is Indicting)</li><li>Trial</li><li>Sentencing</li><li>Appeal (if a fair trial is questioned)</li></ol></div>
                            </div>
                            <div class="bg-green-100 p-4 rounded-lg space-y-3 text-sm">
                                <h3 class="font-bold text-green-800 text-lg mb-2 border-b-2 border-green-200 pb-2">AKS 47: Juvenile Justice</h3>
                                <p class="text-gray-700"><strong class="font-semibold text-green-700">Who is a Juvenile?</strong> Anyone under 17 years old.</p>
                                <p class="text-gray-700"><strong class="font-semibold text-green-700">Goal of Court:</strong> To protect and rehabilitate.</p>
                                <div class="text-gray-700"><strong class="font-semibold text-green-700">Types of Acts:</strong><ul class="list-disc list-inside mt-1 pl-2"><li><strong>Delinquent:</strong> A crime if done by an adult (e.g., theft).</li><li><strong>Unruly (Status Offense):</strong> Only wrong for a juvenile (e.g., skipping school).</li></ul></div>
                                <p class="text-gray-700"><strong class="font-semibold text-green-700">No Juries:</strong> The judge makes the decisions.</p>
                                <div class="text-gray-700"><strong class="font-semibold text-green-700">Juvenile Justice Steps:</strong><ol class="list-decimal list-inside mt-1 pl-2"><li><strong>Intake:</strong> Taken into custody, parents notified.</li><li><strong>Released or Detained:</strong> Released to parents or held (detained) at a YDC if there is enough evidence.</li><li><strong>Informal Adjustment:</strong> Optional for first-timers who admit guilt; supervised for 90 days.</li><li><strong>Adjudicatory Hearing:</strong> Judge determines guilt or innocence.</li><li><strong>Dispositional Hearing:</strong> Judge hears witnesses and determines consequences.</li><li><strong>Sentencing:</strong> Judge rules on consequences (e.g., boot camp, probation, fines).</li><li><strong>Appeal:</strong> Can appeal if there is evidence of innocence.</li></ol></div>
                            </div>
                            <div class="bg-yellow-100 p-4 rounded-lg space-y-3 text-sm md:col-span-2">
                                <h3 class="font-bold text-yellow-800 text-lg mb-2 border-b-2 border-yellow-200 pb-2">AKS 48: Local Government</h3>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-gray-700">
                                    <div><strong class="font-semibold text-yellow-700">Main Types:</strong><ul class="list-disc list-inside mt-1 pl-2"><li><strong>City (Municipality):</strong> Provides services like police, trash pickup. Established by a Municipal Charter.</li><li><strong>County:</strong> Carries out state programs (e.g., courts). Mandated by the GA Constitution.</li><li><strong>Special-Purpose:</strong> Has one specific job (e.g., school district, MARTA). Created to benefit citizens.</li></ul></div>
                                    <div><strong class="font-semibold text-yellow-700">How They're Funded:</strong><ul class="list-disc list-inside mt-1 pl-2"><li>Sales Taxes (like SPLOST)</li><li>Ad Valorem (Property) Taxes</li><li>User Fees and Fines</li></ul></div>
                                </div>
                            </div>
                        </div>`
                },
                unit4: {
                    title: "Unit 4: Georgia's Colonization",
                    questions: [
                        { question: "Mississippian societies were organized into complex political units known as...", reference: "AKS 31.a: Mississippian Culture", answers: [{ text: "Tribes", correct: false }, { text: "Chiefdoms", correct: true }, { text: "Democracies", correct: false }], highlightTerm: "Chiefdoms" },
                        { question: "What defensive structures, like high walls and water-filled ditches, did the Mississippians build around their villages?", reference: "AKS 31.a: Mississippian Culture", answers: [{ text: "Forts and trenches", correct: false }, { text: "Palisades and moats", correct: true }, { text: "Castles and ramparts", correct: false }], highlightTerm: "palisades and moats" },
                        { question: "What was the main economic reason for British colonization under the policy of mercantilism?", reference: "AKS 31.b: European Exploration", answers: [{ text: "To spread their language", correct: false }, { text: "To acquire raw materials for England", correct: true }, { text: "To create military alliances", correct: false }], highlightTerm: "mercantilism" },
                        { question: "Which European diseases, other than smallpox, devastated American Indian populations?", reference: "AKS 31.c: Spanish Impact", answers: [{ text: "Chickenpox, Mumps, Polio", correct: false }, { text: "Influenza, Measles, Typhus", correct: true }, { text: "Common Cold, Flu, Strep Throat", correct: false }], highlightTerm: "influenza, and measles" },
                        { question: "What specific group of impoverished people was the Georgia colony intended to help, according to the principle of philanthropy?", reference: "AKS 32.a: Charter of 1732", answers: [{ text: "All poor people", correct: false }, { text: "The 'worthy poor'", correct: true }, { text: "Only farmers", correct: false }], highlightTerm: "worthy poor" },
                        { question: "What specific raw material, used for luxury fabric, did the Trustees hope colonists would produce in Georgia?", reference: "AKS 32.a: Charter of 1732", answers: [{ text: "Cotton", correct: false }, { text: "Silk", correct: true }, { text: "Wool", correct: false }], highlightTerm: "Silk" },
                        { question: "The group of Jewish settlers was allowed to stay in Georgia largely because one of them, Dr. Samuel Nunes, helped stop an outbreak of what disease?", reference: "AKS 32.c: Diverse Groups", answers: [{ text: "Smallpox", correct: false }, { text: "Yellow Fever", correct: true }, { text: "Influenza", correct: false }], highlightTerm: "yellow fever" },
                        { question: "The Highland Scots were crucial in helping James Oglethorpe win which key battle against the Spanish?", reference: "AKS 32.c: Diverse Groups", answers: [{ text: "The Battle of Savannah", correct: false }, { text: "The Battle of Bloody Marsh", correct: true }, { text: "The Battle of Ebenezer", correct: false }], highlightTerm: "Battle of Bloody Marsh" },
                        { question: "What was a key characteristic of the 'Malcontents' that set them apart from many other colonists?", reference: "AKS 32.c: Diverse Groups", answers: [{ text: "They were not religious", correct: false }, { text: "They paid their own way to Georgia", correct: true }, { text: "They were all soldiers", correct: false }], highlightTerm: "paid their own way" },
                        { question: "When Georgia became a Royal Colony, what new right was granted to white, male landowners, introducing a form of self-government?", reference: "AKS 32.d: Royal Colony Transition", answers: [{ text: "The right to free speech", correct: false }, { text: "The right to vote and hold office", correct: true }, { text: "The right to refuse taxes", correct: false }], highlightTerm: "self-government" },
                        { question: "The end of land ownership restrictions in the Royal period led to the creation of large farms, dependent on slavery, called what?", reference: "AKS 32.d: Royal Colony Transition", answers: [{ text: "Manors", correct: false }, { text: "Plantations", correct: true }, { text: "Homesteads", correct: false }], highlightTerm: "plantations" },
                        { question: "Who was the Yamacraw chief who granted James Oglethorpe the land for Savannah?", reference: "AKS 32.b: Establishing Savannah", answers: [{ text: "Pocahontas", correct: false }, { text: "Tomochichi", correct: true }, { text: "Sequoyah", correct: false }], highlightTerm: "Tomochichi" },
                        { question: "Who served as the crucial translator between Oglethorpe and the Yamacraw Indians?", reference: "AKS 32.b: Establishing Savannah", answers: [{ text: "A Spanish missionary", correct: false }, { text: "Mary Musgrove", correct: true }, { text: "A French fur trader", correct: false }], highlightTerm: "Mary Musgrove" },
                        { question: "Which group of Protestant refugees from Austria settled in New Ebenezer and were against slavery?", reference: "AKS 32.c: Diverse Groups", answers: [{ text: "Malcontents", correct: false }, { text: "Salzburgers", correct: true }, { text: "Highland Scots", correct: false }], highlightTerm: "Salzburgers" },
                        { question: "What valuable blue dye was a profitable crop for colonial Georgia?", reference: "AKS 32.e: Colonial Goods", answers: [{ text: "Silk", correct: false }, { text: "Indigo", correct: true }, { text: "Wine", correct: false }], highlightTerm: "Indigo" },
                        { question: "What materials were primarily used to construct a 'wattle and daub' shelter?", reference: "AKS 31.a: Mississippian Culture", answers: [{ text: "Bricks and Mortar", correct: false }, { text: "River cane and clay", correct: true }, { text: "Logs and mud", correct: false }], highlightTerm: "wattle & daub" },
                        { question: "What was the primary religious motivation for Spanish exploration in North America?", reference: "AKS 31.b: European Exploration", answers: [{ text: "To escape religious persecution", correct: false }, { text: "To convert natives to Catholicism", correct: true }, { text: "To find sacred artifacts", correct: false }], highlightTerm: "God, Gold, and Glory" },
                        { question: "Where in Georgia were the Spanish missions primarily established?", reference: "AKS 31.c: Spanish Impact", answers: [{ text: "Along the Fall Line", correct: false }, { text: "On the Barrier Islands", correct: true }, { text: "Near the mountains", correct: false }], highlightTerm: "missions" },
                        { question: "Who was the British king that granted the Charter of 1732 to the Trustees?", reference: "AKS 32.a: Charter of 1732", answers: [{ text: "King James I", correct: false }, { text: "King George II", correct: true }, { text: "King Henry VIII", correct: false }], highlightTerm: "King George II" },
                        { question: "Which group was explicitly banned from the Georgia colony by the Charter of 1732?", reference: "AKS 32.a: Charter of 1732", answers: [{ text: "Protestants", correct: false }, { text: "Catholics", correct: true }, { text: "Jews", correct: false }], highlightTerm: "Philanthropy" },
                        { question: "What was Mary Musgrove's unique heritage that made her an effective translator?", reference: "AKS 32.b: Establishing Savannah", answers: [{ text: "Spanish and Yamacraw", correct: false }, { text: "Half-Creek and half-English", correct: true }, { text: "French and Cherokee", correct: false }], highlightTerm: "Mary Musgrove" },
                        { question: "The Malcontents were most upset with the strict rules established by which group?", reference: "AKS 32.c: Diverse Groups", answers: [{ text: "The British Parliament", correct: false }, { text: "The Trustees", correct: true }, { text: "The Royal Governor", correct: false }], highlightTerm: "Malcontents" },
                        { question: "What was the main reason mulberry trees were required to be planted in colonial Georgia?", reference: "AKS 32.e: Colonial Goods", answers: [{ text: "To provide shade", correct: false }, { text: "As a food source for silkworms", correct: true }, { text: "For lumber", correct: false }], highlightTerm: "Silk" },
                        { question: "Which list correctly identifies the main colonial goods produced in Georgia (W.R.I.S.T.)?", reference: "AKS 32.e: Colonial Goods", answers: [{ text: "Wine, Rice, Indigo, Silk, Cotton", correct: false }, { text: "Wine, Rice, Indigo, Silk, Tobacco", correct: true }, { text: "Wheat, Rice, Indigo, Silk, Tobacco", correct: false }], highlightTerm: "W.R.I.S.T." }
                    ],
                    studyGuideHTML: `
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="bg-blue-100 p-4 rounded-lg space-y-3 text-sm">
                                <h3 class="font-bold text-blue-800 text-lg">AKS 31: European Contact & Impact</h3>
                                <p class="text-gray-700"><strong>Mississippian Culture (31.a):</strong> Organized into complex <strong>Chiefdoms</strong>. Lived in large villages with mounds, defensive <strong>palisades and moats</strong>. They grew much of their food in gardens, with <strong>Maize (corn)</strong> as the main crop. They used the <strong>Bow & arrow</strong> and lived in <strong>wattle & daub</strong> shelters.</p>
                                <p class="text-gray-700"><strong>European Motives (31.b):</strong> The Spanish were motivated by 'God, Gold, and Glory'. The British used the policy of <strong>mercantilism</strong>, wanting colonies to produce <strong>raw materials</strong> for England.</p>
                                <p class="text-gray-700"><strong>Spanish Impact (31.c):</strong> <strong>Hernando de Soto</strong>'s exploration led to the killing of many natives and the spread of devastating diseases like <strong>smallpox, influenza, and measles</strong>. Spain also established <strong>missions</strong> on the barrier islands to convert natives to Catholicism.</p>
                            </div>
                            <div class="bg-green-100 p-4 rounded-lg space-y-3 text-sm">
                                <h3 class="font-bold text-green-800 text-lg">AKS 32.a & 32.b: Founding of Georgia</h3>
                                <p class="text-gray-700"><strong>Charter of 1732 (32.a):</strong> Granted by <strong>King George II</strong>, this charter established Georgia for three reasons: <strong>Philanthropy</strong> (to help the <strong>"worthy poor"</strong>), <strong>Economics</strong> (to produce raw materials like <strong>Silk</strong>), and <strong>Defense</strong> (a buffer to protect South Carolina from the Spanish).</p>
                                <p class="text-gray-700"><strong>Establishing Savannah (32.b):</strong> James Oglethorpe befriended Yamacraw chief <strong>Tomochichi</strong>, who granted land at Yamacraw Bluff. <strong>Mary Musgrove</strong> (half-Creek, half-English) served as the essential translator.</p>
                            </div>
                            <div class="bg-yellow-100 p-4 rounded-lg space-y-3 text-sm">
                                <h3 class="font-bold text-yellow-800 text-lg">AKS 32.c: Diverse Groups</h3>
                                 <ul class="list-disc list-inside ml-4 text-gray-700">
                                    <li><strong>Jews:</strong> Arrived without permission; a doctor among them, <strong>Samuel Nunes</strong>, helped stop a <strong>yellow fever</strong> outbreak, so Oglethorpe let them stay.</li>
                                    <li><strong>Salzburgers:</strong> German-speaking Protestants from Austria who settled New Ebenezer. They were industrious, famously successful at producing <strong>Silk</strong>, and opposed slavery.</li>
                                    <li><strong>Highland Scots:</strong> Recruited for their fighting skills, they settled Darien and helped Oglethorpe win the <strong>Battle of Bloody Marsh</strong>. They also opposed slavery.</li>
                                    <li><strong>Malcontents:</strong> Colonists who <strong>paid their own way</strong> and were unhappy with the rules on land, slavery, and rum.</li>
                                 </ul>
                            </div>
                             <div class="bg-red-100 p-4 rounded-lg space-y-3 text-sm">
                                <h3 class="font-bold text-red-800 text-lg">AKS 32.d & 32.e: Royal Colony & Economy</h3>
                                <p class="text-gray-700"><strong>Royal Colony Transition (32.d):</strong> After 1752, the King appointed a Royal Governor. Land restrictions were lifted, leading to large <strong>plantations</strong>. Alcohol was allowed, and slavery became legal. A limited form of <strong>self-government</strong> was introduced (white, male landowners could vote and hold office).</p>
                                <p class="text-gray-700"><strong>Colonial Goods (32.e):</strong> Main products (<strong>W.R.I.S.T.</strong>) were Wine, Rice, <strong>Indigo</strong> (blue dye), Silk, and Tobacco. Cotton was NOT yet a major crop.</p>
                            </div>
                        </div>`
                },
                unit5: {
                    title: "Unit 5: American Revolutionary War",
                    questions: [
                        { question: "Who fought against Great Britain and its colonists in the French and Indian War?", reference: "AKS 33.a: Causes of Revolution", answers: [{ text: "Spain", correct: false }, { text: "France and American Indians", correct: true }, { text: "Germany", correct: false }], highlightTerm: "France and its American Indian allies" },
                        { question: "What was the main dispute that caused the French and Indian War?", reference: "AKS 33.a: Causes of Revolution", answers: [{ text: "Fishing rights", correct: false }, { text: "The Ohio River Valley", correct: true }, { text: "Gold in Florida", correct: false }], highlightTerm: "Ohio River Valley" },
                        { question: "How did the French and Indian War lead to the American Revolution?", reference: "AKS 33.a: Causes of Revolution", answers: [{ text: "Britain taxed colonists to pay for the war", correct: true }, { text: "France took over Georgia", correct: false }, { text: "Colonists wanted to speak French", correct: false }], highlightTerm: "taxed the colonists" },
                        { question: "After the French and Indian War, Georgia's western boundary was extended to which river?", reference: "AKS 33.a: Causes of Revolution", answers: [{ text: "Savannah River", correct: false }, { text: "Mississippi River", correct: true }, { text: "Chattahoochee River", correct: false }], highlightTerm: "Mississippi River" },
                        { question: "What did the Proclamation of 1763 forbid colonists from doing?", reference: "AKS 33.a: Causes of Revolution", answers: [{ text: "Drinking tea", correct: false }, { text: "Settling west of the Appalachian Mountains", correct: true }, { text: "Trading with Spain", correct: false }], highlightTerm: "west of the Appalachian Mountains" },
                        { question: "Why was the Proclamation of 1763 issued?", reference: "AKS 33.a: Causes of Revolution", answers: [{ text: "To avoid warfare with American Indians", correct: true }, { text: "To punish the French", correct: false }, { text: "To encourage farming", correct: false }], highlightTerm: "avoid future warfare" },
                        { question: "What was the Stamp Act?", reference: "AKS 33.a: Causes of Revolution", answers: [{ text: "A tax on tea", correct: false }, { text: "A tax on paper goods and legal documents", correct: true }, { text: "A tax on stamps for letters only", correct: false }], highlightTerm: "tax on newspapers, legal documents" },
                        { question: "Which group formed in Georgia to oppose the Stamp Act?", reference: "AKS 33.a: Causes of Revolution", answers: [{ text: "Sons of Liberty", correct: false }, { text: "Liberty Boys", correct: true }, { text: "Redcoats", correct: false }], highlightTerm: "Liberty Boys" },
                        { question: "What does the Preamble of the Declaration of Independence state?", reference: "AKS 33.b: Declaration of Independence", answers: [{ text: "All men are created equal", correct: true }, { text: "The King is supreme", correct: false }, { text: "War is declared", correct: false }], highlightTerm: "All men are created equal" },
                        { question: "Which part of the Declaration of Independence lists complaints against King George III?", reference: "AKS 33.b: Declaration of Independence", answers: [{ text: "Preamble", correct: false }, { text: "Grievances", correct: true }, { text: "Declaration", correct: false }], highlightTerm: "Grievances" },
                        { question: "Who was the primary author of the Declaration of Independence?", reference: "AKS 33.b: Declaration of Independence", answers: [{ text: "George Washington", correct: false }, { text: "Thomas Jefferson", correct: true }, { text: "Abraham Lincoln", correct: false }], highlightTerm: "Thomas Jefferson" },
                        { question: "Which of the following is NOT a Georgia signer of the Declaration of Independence?", reference: "AKS 33.b: Declaration of Independence", answers: [{ text: "Button Gwinnett", correct: false }, { text: "Lyman Hall", correct: false }, { text: "James Oglethorpe", correct: true }], highlightTerm: "Button Gwinnett, Lyman Hall, and George Walton" },
                        { question: "Which Georgia signer died in a duel?", reference: "AKS 33.b: Declaration of Independence", answers: [{ text: "George Walton", correct: false }, { text: "Button Gwinnett", correct: true }, { text: "Lyman Hall", correct: false }], highlightTerm: "Button Gwinnett" },
                        { question: "Colonists who remained faithful to Great Britain were known as...", reference: "AKS 33.c: Revolution in GA", answers: [{ text: "Patriots", correct: false }, { text: "Loyalists (Tories)", correct: true }, { text: "Whigs", correct: false }], highlightTerm: "Loyalist / Tory" },
                        { question: "What was the significance of the Battle of Kettle Creek?", reference: "AKS 33.c: Revolution in GA", answers: [{ text: "It was a major British victory", correct: false }, { text: "It boosted Patriot morale and provided supplies", correct: true }, { text: "It ended the war", correct: false }], highlightTerm: "boosted the morale" },
                        { question: "Who won the Battle of Kettle Creek?", reference: "AKS 33.c: Revolution in GA", answers: [{ text: "Patriots", correct: true }, { text: "Loyalists", correct: false }, { text: "British Regulars", correct: false }], highlightTerm: "Patriots" },
                        { question: "What was the outcome of the Siege of Savannah?", reference: "AKS 33.c: Revolution in GA", answers: [{ text: "Patriots retook the city", correct: false }, { text: "The city remained under British control", correct: true }, { text: " The French surrendered", correct: false }], highlightTerm: "remained under British control" },
                        { question: "Who helped the Patriots during the Siege of Savannah?", reference: "AKS 33.c: Revolution in GA", answers: [{ text: "The Spanish Army", correct: false }, { text: "The French Army", correct: true }, { text: "The German Army", correct: false }], highlightTerm: "French Army" },
                        { question: "Why were the Articles of Confederation considered weak?", reference: "AKS 33.d: Articles of Confederation", answers: [{ text: "Too much power to the President", correct: false }, { text: "Weak central government and no power to tax", correct: true }, { text: "Too many courts", correct: false }], highlightTerm: "Weak central government" },
                        { question: "What did the weaknesses of the Articles of Confederation lead to?", reference: "AKS 33.d: Articles of Confederation", answers: [{ text: "The writing of the U.S. Constitution", correct: true }, { text: "The Civil War", correct: false }, { text: "The Declaration of Independence", correct: false }], highlightTerm: "creating the Constitution" },
                        { question: "Under the Articles of Confederation, there was no...", reference: "AKS 33.d: Articles of Confederation", answers: [{ text: "Legislature", correct: false }, { text: "National Currency or President", correct: true }, { text: "State Government", correct: false }], highlightTerm: "No national currency" }
                    ],
                    studyGuideHTML: `
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="bg-blue-100 p-4 rounded-lg space-y-3 text-sm">
                                <h3 class="font-bold text-blue-800 text-lg">AKS 33.a: Causes of Revolution</h3>
                                <p class="text-gray-700"><strong>French & Indian War:</strong> Fought between GB and France/Indians over the <strong>Ohio River Valley</strong>. Resulted in GB taxing colonists to pay for it.</p>
                                <p class="text-gray-700"><strong>Proclamation of 1763:</strong> Forbade settling <strong>west of the Appalachian Mountains</strong> to <strong>avoid future warfare</strong> with Indians.</p>
                                <p class="text-gray-700"><strong>Stamp Act:</strong> Tax on paper/licenses. Opposed by the <strong>Liberty Boys</strong> in GA.</p>
                            </div>
                            <div class="bg-green-100 p-4 rounded-lg space-y-3 text-sm">
                                <h3 class="font-bold text-green-800 text-lg">AKS 33.b: Declaration of Independence</h3>
                                <p class="text-gray-700"><strong>Parts:</strong> Preamble ("All men are created equal"), <strong>Grievances</strong> (complaints against King), Declaration (separation).</p>
                                <p class="text-gray-700"><strong>GA Signers:</strong> <strong>Button Gwinnett</strong> (died in duel), Lyman Hall (UGA founder), George Walton.</p>
                            </div>
                            <div class="bg-yellow-100 p-4 rounded-lg space-y-3 text-sm">
                                <h3 class="font-bold text-yellow-800 text-lg">AKS 33.c: Revolution in GA</h3>
                                <p class="text-gray-700"><strong>Loyalists (Tories):</strong> Loyal to Britain. <strong>Patriots (Whigs):</strong> Wanted independence.</p>
                                <p class="text-gray-700"><strong>Kettle Creek:</strong> Patriot victory. <strong>Boosted morale</strong> and provided supplies.</p>
                                <p class="text-gray-700"><strong>Siege of Savannah:</strong> Patriots and <strong>French Army</strong> failed to take the city. It <strong>remained under British control</strong>.</p>
                            </div>
                            <div class="bg-red-100 p-4 rounded-lg space-y-3 text-sm">
                                <h3 class="font-bold text-red-800 text-lg">AKS 33.d: Articles of Confederation</h3>
                                <p class="text-gray-700"><strong>Weaknesses:</strong> <strong>Weak central government</strong>, no power to tax, no President, no court system, <strong>no national currency</strong>.</p>
                                <p class="text-gray-700"><strong>Result:</strong> Weaknesses led to the writing of the <strong>U.S. Constitution</strong>.</p>
                            </div>
                        </div>`
                },
                unit6: {
                    title: "Unit 6: Westward Expansion",
                    questions: [
                        { question: "The University of Georgia was the first university in the nation to be what?", reference: "AKS 34.a: UGA & Capitals", answers: [{ text: "Private", correct: false }, { text: "Land Grant", correct: true }, { text: "Religious", correct: false }], highlightTerm: "land grant university" },
                        { question: "What acronym represents the order of Georgia's five capitals?", reference: "AKS 34.a: UGA & Capitals", answers: [{ text: "H.O.M.E.S.", correct: false }, { text: "S.A.L.M.A.", correct: true }, { text: "P.E.A.C.H.", correct: false }], highlightTerm: "S-Savannah" },
                        { question: "Why did Georgia's capitals move westward?", reference: "AKS 34.a: UGA & Capitals", answers: [{ text: "To avoid hurricanes", correct: false }, { text: "To follow the population shift", correct: true }, { text: "To be closer to Florida", correct: false }], highlightTerm: "population shifted" },
                        { question: "Who qualified for free land under the Headright System?", reference: "AKS 34.b: Land Policies", answers: [{ text: "Any adult", correct: false }, { text: "White male head of household", correct: true }, { text: "Native Americans", correct: false }], highlightTerm: "Headright System" },
                        { question: "Which system allowed citizens to buy a ticket for a chance to win land?", reference: "AKS 34.b: Land Policies", answers: [{ text: "Headright System", correct: false }, { text: "Land Lottery", correct: true }, { text: "Homestead Act", correct: false }], highlightTerm: "Land Lottery" },
                        { question: "What was the Yazoo Land Fraud?", reference: "AKS 34.b: Land Policies", answers: [{ text: "Theft of gold", correct: false }, { text: "Bribery of legislators to sell land cheap", correct: true }, { text: "Fake lottery tickets", correct: false }], highlightTerm: "Yazoo Land Fraud" },
                        { question: "What was the result of the Yazoo Land Fraud for Georgia's territory?", reference: "AKS 34.b: Land Policies", answers: [{ text: "GA gained Florida", correct: false }, { text: "GA ceded lands (AL & MS) to the US", correct: true }, { text: "GA expanded west", correct: false }], highlightTerm: "give up" },
                        { question: "What invention by Eli Whitney separated seeds from cotton fiber?", reference: "AKS 34.c: Technology", answers: [{ text: "Spinning Jenny", correct: false }, { text: "Cotton Gin", correct: true }, { text: "Steam Engine", correct: false }], highlightTerm: "Cotton Gin" },
                        { question: "What was a major negative impact of the Cotton Gin?", reference: "AKS 34.c: Technology", answers: [{ text: "It reduced farm size", correct: false }, { text: "It increased the demand for slavery", correct: true }, { text: "It made cotton less profitable", correct: false }], highlightTerm: "Slavery increased" },
                        { question: "Which city, originally called Terminus, grew because it was a railroad hub?", reference: "AKS 34.c: Technology", answers: [{ text: "Savannah", correct: false }, { text: "Atlanta", correct: true }, { text: "Macon", correct: false }], highlightTerm: "Terminus" },
                        { question: "Which Creek chief was executed by his own people for signing the Treaty of Indian Springs?", reference: "AKS 34.d: William McIntosh", answers: [{ text: "Tomochichi", correct: false }, { text: "William McIntosh", correct: true }, { text: "John Ross", correct: false }], highlightTerm: "William McIntosh" },
                        { question: "Who created the Cherokee syllabary, the first written native language?", reference: "AKS 34.e: Cherokee Removal", answers: [{ text: "Sequoyah", correct: true }, { text: "John Ross", correct: false }, { text: "Osceola", correct: false }], highlightTerm: "Sequoyah" },
                        { question: "What discovery in Dahlonega hastened the removal of the Cherokee?", reference: "AKS 34.e: Cherokee Removal", answers: [{ text: "Oil", correct: false }, { text: "Gold", correct: true }, { text: "Silver", correct: false }], highlightTerm: "Dahlonega Gold Rush" },
                        { question: "What did the Supreme Court rule in Worcester v. Georgia?", reference: "AKS 34.e: Cherokee Removal", answers: [{ text: "The Cherokee must leave", correct: false }, { text: "GA laws did not apply to the Cherokee Nation", correct: true }, { text: "Missionaries must be jailed", correct: false }], highlightTerm: "Worcester v. Georgia" },
                        { question: "How did President Andrew Jackson respond to the Supreme Court's ruling?", reference: "AKS 34.e: Cherokee Removal", answers: [{ text: "He enforced it immediately", correct: false }, { text: "He refused to enforce it", correct: true }, { text: "He resigned", correct: false }], highlightTerm: "Andrew Jackson" },
                        { question: "Who was the Principal Chief of the Cherokee who fought removal through the courts?", reference: "AKS 34.e: Cherokee Removal", answers: [{ text: "William McIntosh", correct: false }, { text: "John Ross", correct: true }, { text: "Major Ridge", correct: false }], highlightTerm: "John Ross" },
                        { question: "The forced removal of the Cherokee to Oklahoma is known as what?", reference: "AKS 34.e: Cherokee Removal", answers: [{ text: "The Long Walk", correct: false }, { text: "The Trail of Tears", correct: true }, { text: "The Great Migration", correct: false }], highlightTerm: "Trail of Tears" },
                        { question: "What was the original name of the University of Georgia?", reference: "AKS 34.a: UGA & Capitals", answers: [{ text: "Athens College", correct: false }, { text: "Franklin College", correct: true }, { text: "Baldwin University", correct: false }], highlightTerm: "Franklin College" },
                        { question: "Who wrote the charter for UGA, believing education was necessary for a free government?", reference: "AKS 34.a: UGA & Capitals", answers: [{ text: "James Oglethorpe", correct: false }, { text: "Abraham Baldwin", correct: true }, { text: "Eli Whitney", correct: false }], highlightTerm: "Abraham Baldwin" },
                        { question: "How did the Georgia legislature destroy the records of the Yazoo Land Fraud?", reference: "AKS 34.b: Land Policies", answers: [{ text: "Shredded them", correct: false }, { text: "Burned them with a magnifying glass", correct: true }, { text: "Buried them in the swamp", correct: false }], highlightTerm: "burned all the land records" },
                        { question: "After the Yazoo Land Fraud, what river became Georgia's new western border?", reference: "AKS 34.b: Land Policies", answers: [{ text: "Mississippi River", correct: false }, { text: "Savannah River", correct: false }, { text: "Chattahoochee River", correct: true }], highlightTerm: "Chattahoochee River" },
                        { question: "Under the Headright System, what was the maximum amount of land a family could receive?", reference: "AKS 34.b: Land Policies", answers: [{ text: "1000 acres", correct: true }, { text: "500 acres", correct: false }, { text: "100 acres", correct: false }], highlightTerm: "1000 acres" },
                        { question: "Which group of people, besides white males, could participate in the Land Lottery?", reference: "AKS 34.b: Land Policies", answers: [{ text: "Indentured Servants", correct: false }, { text: "Widows and War Veterans", correct: true }, { text: "Native Americans", correct: false }], highlightTerm: "widows" },
                        { question: "What term describes the economic dominance of the cotton crop in Georgia?", reference: "AKS 34.c: Technology", answers: [{ text: "Cotton Boom", correct: false }, { text: "King Cotton", correct: true }, { text: "Fiber Power", correct: false }], highlightTerm: "Cotton is King" },
                        { question: "How did the cotton gin affect crop diversity in Georgia?", reference: "AKS 34.c: Technology", answers: [{ text: "It increased crop diversity", correct: false }, { text: "It resulted in less crop diversity", correct: true }, { text: "It had no effect", correct: false }], highlightTerm: "less crop diversity" },
                        { question: "The city of Terminus (later Atlanta) was established at the end of a line for which transportation system?", reference: "AKS 34.c: Technology", answers: [{ text: "Canal system", correct: false }, { text: "Stagecoach route", correct: false }, { text: "Railroad", correct: true }], highlightTerm: "Terminus" },
                        { question: "What was the name of the treaty signed by William McIntosh that gave away all Creek lands?", reference: "AKS 34.d: William McIntosh", answers: [{ text: "Treaty of New Echota", correct: false }, { text: "Treaty of Paris", correct: false }, { text: "Treaty of Indian Springs", correct: true }], highlightTerm: "Treaty of Indian Springs" },
                        { question: "How much money was Chief William McIntosh paid to sign the Treaty of Indian Springs?", reference: "AKS 34.d: William McIntosh", answers: [{ text: "$200,000", correct: true }, { text: "$1,000,000", correct: false }, { text: "$50", correct: false }], highlightTerm: "$200,000" },
                        { question: "What was the name of the bilingual newspaper established by the Cherokee?", reference: "AKS 34.e: Cherokee Removal", answers: [{ text: "The Cherokee Times", correct: false }, { text: "The Cherokee Phoenix", correct: true }, { text: "The Tribal Tribune", correct: false }], highlightTerm: "Phoenix" },
                        { question: "Who was Samuel Worcester, the man arrested in the Worcester v. Georgia case?", reference: "AKS 34.e: Cherokee Removal", answers: [{ text: "A Cherokee Chief", correct: false }, { text: "A white missionary", correct: true }, { text: "A gold miner", correct: false }], highlightTerm: "white missionary" },
                        { question: "Why was Samuel Worcester arrested by the state of Georgia?", reference: "AKS 34.e: Cherokee Removal", answers: [{ text: "For finding gold", correct: false }, { text: "Refusing to sign an oath of allegiance to GA", correct: true }, { text: "Stealing land", correct: false }], highlightTerm: "refused to sign an oath" },
                        { question: "What famous quote is attributed to Andrew Jackson regarding the Supreme Court's decision?", reference: "AKS 34.e: Cherokee Removal", answers: [{ text: "Justice is blind.", correct: false }, { text: "John Marshall has rendered his decision; now let him enforce it.", correct: true }, { text: "The Cherokee must stay.", correct: false }], highlightTerm: "let him enforce it" },
                        { question: "What did John Ross do to try and prevent Cherokee removal?", reference: "AKS 34.e: Cherokee Removal", answers: [{ text: "Started a war", correct: false }, { text: "Took a petition to Congress", correct: true }, { text: "Sold the land", correct: false }], highlightTerm: "petition" },
                        { question: "What does 'assimilate' mean in the context of the Cherokee?", reference: "AKS 34.e: Cherokee Removal", answers: [{ text: "To fight back", correct: false }, { text: "To move away", correct: false }, { text: "To adopt the customs of another culture", correct: true }], highlightTerm: "assimilate" },
                        { question: "Which branch of government did the Yazoo Land Fraud involve bribing?", reference: "AKS 34.b: Land Policies", answers: [{ text: "Legislative", correct: true }, { text: "Judicial", correct: false }, { text: "None", correct: false }], highlightTerm: "legislative" },
                        { question: "The 'Trail of Tears' refers to the forced march to which modern-day state?", reference: "AKS 34.e: Cherokee Removal", answers: [{ text: "Texas", correct: false }, { text: "Oklahoma", correct: true }, { text: "Florida", correct: false }], highlightTerm: "Oklahoma" },
                        { question: "Which Georgia capital was located where the Yazoo Act was repealed and burned?", reference: "AKS 34.a: UGA & Capitals", answers: [{ text: "Savannah", correct: false }, { text: "Milledgeville", correct: false }, { text: "Louisville", correct: true }], highlightTerm: "Louisville" }
                    ],
                    studyGuideHTML: `
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="bg-blue-100 p-4 rounded-lg space-y-3 text-sm">
                                <h3 class="font-bold text-blue-800 text-lg">AKS 34.a: UGA & Capitals</h3>
                                <p class="text-gray-700"><strong>University of Georgia:</strong> The first <strong>land grant university</strong> in the USA (originally Franklin College). Established to educate white males.</p>
                                <p class="text-gray-700"><strong>Capitals (S.A.L.M.A.):</strong> Savannah, Augusta, Louisville, Milledgeville, Atlanta. The capitals moved West/Northwest to follow the <strong>population shifted</strong> to the interior.</p>
                            </div>
                            <div class="bg-green-100 p-4 rounded-lg space-y-3 text-sm">
                                <h3 class="font-bold text-green-800 text-lg">AKS 34.b: Land Policies</h3>
                                <ul class="list-disc list-inside ml-4 text-gray-700">
                                    <li><strong>Headright System:</strong> White male <strong>head of household</strong> could get land (up to 1000 acres) for free.</li>
                                    <li><strong>Land Lottery:</strong> Citizens bought tickets for a chance to win land (white males, widows, vets).</li>
                                    <li><strong>Yazoo Land Fraud:</strong> Legislators were bribed to sell land cheap. The Act was burned in Louisville. Result: GA forced to <strong>give up</strong> western lands (AL & MS); Chattahoochee became the border.</li>
                                </ul>
                            </div>
                            <div class="bg-yellow-100 p-4 rounded-lg space-y-3 text-sm">
                                <h3 class="font-bold text-yellow-800 text-lg">AKS 34.c & 34.d: Tech & McIntosh</h3>
                                <p class="text-gray-700"><strong>Cotton Gin:</strong> Invented by Eli Whitney. Separated seeds. Resulted in larger farms and <strong>Slavery increased</strong> significantly.</p>
                                <p class="text-gray-700"><strong>Railroads:</strong> Transported cotton. The city of <strong>Terminus</strong> grew into Atlanta.</p>
                                <p class="text-gray-700"><strong>William McIntosh:</strong> Creek Chief who signed the Treaty of Indian Springs, selling all Creek land. He was executed by his own people.</p>
                            </div>
                            <div class="bg-red-100 p-4 rounded-lg space-y-3 text-sm">
                                <h3 class="font-bold text-red-800 text-lg">AKS 34.e: Cherokee Removal</h3>
                                <p class="text-gray-700"><strong>Assimilation:</strong> Cherokee tried to fit in (Christianity, Constitution, Farming). <strong>Sequoyah</strong> created the Syllabary (written language) and Phoenix newspaper.</p>
                                <p class="text-gray-700"><strong>Worcester v. Georgia:</strong> Supreme Court (John Marshall) ruled GA laws didn't apply to Cherokee. President <strong>Andrew Jackson</strong> refused to enforce it.</p>
                                <p class="text-gray-700"><strong>Removal:</strong> <strong>John Ross</strong> fought in courts but failed. <strong>Dahlonega Gold Rush</strong> sped up the desire for land. The forced march to OK is the <strong>Trail of Tears</strong>.</p>
                            </div>
                        </div>`
                },
                unit7: {
    title: "Unit 7: American Civil War",
    questions: [
        // --- AKS 35.a: Causes of the Civil War ---
        { question: "Why did the South want slavery to expand?", reference: "AKS 35.a: Slavery", answers: [{ text: "For industrial growth", correct: false }, { text: "High profits and wealth from agriculture", correct: true }, { text: "To increase population", correct: false }], highlightTerm: "profits and wealth" },
        { question: "What was the North's general opinion on slavery?", reference: "AKS 35.a: Slavery", answers: [{ text: "They wanted it to be limited or abolished", correct: true }, { text: "They wanted it to expand", correct: false }, { text: "They were neutral", correct: false }], highlightTerm: "limited or abolished" },
        { question: "Why did the South's economy rely on slavery?", reference: "AKS 35.a: Slavery", answers: [{ text: "It was a tradition", correct: false }, { text: "It provided cheap labor for profitable agriculture", correct: true }, { text: "Factories required slave labor", correct: false }], highlightTerm: "cheap labor" },
        { question: "What was the Southern view on States' Rights?", reference: "AKS 35.a: States' Rights", answers: [{ text: "Federal laws are supreme", correct: false }, { text: "States could ignore federal laws if they didn't benefit the state", correct: true }, { text: "States should have no power", correct: false }], highlightTerm: "ignore federal laws" },
        { question: "What is Federalism?", reference: "AKS 35.a: States' Rights", answers: [{ text: "State laws are always supreme", correct: false }, { text: "Federal laws take priority over state laws", correct: true }, { text: "Only the President makes laws", correct: false }], highlightTerm: "Federal laws take priority" },
        { question: "What is Nullification?", reference: "AKS 35.a: Nullification", answers: [{ text: "The right to invalidate unconstitutional federal laws", correct: true }, { text: "The right to secede", correct: false }, { text: "The right to create new states", correct: false }], highlightTerm: "null and void (invalidate)" },
        { question: "What was a major goal of the Compromise of 1850?", reference: "AKS 35.a: Compromise of 1850", answers: [{ text: "To declare war on Mexico", correct: false }, { text: "To determine how states enter as free or slave", correct: true }, { text: "To elect a new President", correct: false }], highlightTerm: "how states would enter" },
        { question: "Which state joined the Union as a free state under the Compromise of 1850?", reference: "AKS 35.a: Compromise of 1850", answers: [{ text: "Texas", correct: false }, { text: "California", correct: true }, { text: "Georgia", correct: false }], highlightTerm: "California" },
        { question: "What was the Fugitive Slave Law?", reference: "AKS 35.a: Compromise of 1850", answers: [{ text: "Slaves were free in the North", correct: false }, { text: "The North must return runaway slaves to the South", correct: true }, { text: "Slaves could buy their freedom", correct: false }], highlightTerm: "Fugitive Slave Law" },
        { question: "What did the Georgia Platform support?", reference: "AKS 35.a: Georgia Platform", answers: [{ text: "Immediate secession", correct: false }, { text: "Acceptance of the Compromise of 1850", correct: true }, { text: "Abolition of slavery", correct: false }], highlightTerm: "Georgia Platform supported acceptance" },
        { question: "Why was the Georgia Platform important?", reference: "AKS 35.a: Georgia Platform", answers: [{ text: "It started the Civil War", correct: false }, { text: "It prevented immediate secession and saved the Union temporarily", correct: true }, { text: "It elected a new governor", correct: false }], highlightTerm: "Georgia Platform" },
        { question: "Who was a key author of the Georgia Platform who argued to preserve the Union?", reference: "AKS 35.a: Georgia Platform", answers: [{ text: "Alexander Stephens", correct: true }, { text: "Jefferson Davis", correct: false }, { text: "Robert E. Lee", correct: false }], highlightTerm: "Alexander Stephens" },
        { question: "What was Dred Scott's claim in the Supreme Court case?", reference: "AKS 35.a: Dred Scott Case", answers: [{ text: "He was a citizen", correct: false }, { text: "His time on free soil made him free", correct: true }, { text: "He wanted to buy land", correct: false }], highlightTerm: "time on free soil made him free" },
        { question: "What was the Supreme Court's ruling in the Dred Scott case?", reference: "AKS 35.a: Dred Scott Case", answers: [{ text: "Slaves are property, not citizens", correct: true }, { text: "Dred Scott was free", correct: false }, { text: "Slavery is illegal", correct: false }], highlightTerm: "Slaves are property" },
        { question: "What was the goal of Abraham Lincoln and the Republican Party in 1860?", reference: "AKS 35.a: Election of 1860", answers: [{ text: "To expand slavery", correct: false }, { text: "To limit and eventually end slavery", correct: true }, { text: "To support states' rights", correct: false }], highlightTerm: "limit and then put an end to slavery" },
        { question: "How did the South react to Lincoln's election in 1860?", reference: "AKS 35.a: Election of 1860", answers: [{ text: "They celebrated", correct: false }, { text: "Southern slave states seceded", correct: true }, { text: "They voted for him again", correct: false }], highlightTerm: "Southern slave states seceded" },
        { question: "Which group in Georgia generally opposed secession?", reference: "AKS 35.a: Debate over Secession", answers: [{ text: "Large plantation owners", correct: false }, { text: "Small farmers and northern county reps", correct: true }, { text: "Governor Brown", correct: false }], highlightTerm: "small farmers" },

        // --- AKS 35.b: Civil War Strategies & Key Battles ---
        { question: "What was the South's 'King Cotton' diplomacy strategy?", reference: "AKS 35.b: Civil War Strategies", answers: [{ text: "To grow more cotton", correct: false }, { text: "Exchange cotton with Europe for war supplies", correct: true }, { text: "Use cotton for uniforms", correct: false }], highlightTerm: "King Cotton diplomacy" },
        { question: "What was the North's 'Anaconda Plan'?", reference: "AKS 35.b: Civil War Strategies", answers: [{ text: "To attack from the air", correct: false }, { text: "Naval blockade to strangle Southern trade", correct: true }, { text: "To burn all cotton", correct: false }], highlightTerm: "Anaconda Plan" },
        { question: "What were 'Blockade Runners'?", reference: "AKS 35.b: Civil War Strategies", answers: [{ text: "Private ships that slipped past the Union Blockade", correct: true }, { text: "Union soldiers", correct: false }, { text: "Trains carrying supplies", correct: false }], highlightTerm: "Naval blockade" },
        { question: "What was the bloodiest ONE-DAY battle of the Civil War?", reference: "AKS 35.b: Key Battles", answers: [{ text: "Battle of Gettysburg", correct: false }, { text: "Battle of Antietam", correct: true }, { text: "Battle of Chickamauga", correct: false }], highlightTerm: "Antietam" },
        { question: "What did Abraham Lincoln issue after the Battle of Antietam?", reference: "AKS 35.b: Emancipation Proclamation", answers: [{ text: "The Declaration of Independence", correct: false }, { text: "The Emancipation Proclamation", correct: true }, { text: "The Treaty of Paris", correct: false }], highlightTerm: "Emancipation Proclamation" },
        { question: "What was the purpose of the Emancipation Proclamation?", reference: "AKS 35.b: Emancipation Proclamation", answers: [{ text: "To free all slaves instantly", correct: false }, { text: "To free slaves in rebelling states (CSA)", correct: true }, { text: "To elect a new president", correct: false }], highlightTerm: "free slaves in rebelling states" },
        { question: "Why did the Emancipation Proclamation only free a few slaves initially?", reference: "AKS 35.b: Emancipation Proclamation", answers: [{ text: "Lincoln changed his mind", correct: false }, { text: "The Union army couldn't enforce it in many areas", correct: true }, { text: "Slaves didn't want to leave", correct: false }], highlightTerm: "unable to enforce" },
        { question: "What was the turning point of the war and the bloodiest battle OVERALL (3 days)?", reference: "AKS 35.b: Key Battles", answers: [{ text: "Battle of Gettysburg", correct: true }, { text: "Battle of Antietam", correct: false }, { text: "Battle of Atlanta", correct: false }], highlightTerm: "Gettysburg" },
        { question: "What was the significance of the Battle of Chickamauga?", reference: "AKS 35.b: Key Battles", answers: [{ text: "First battle of the war", correct: false }, { text: "Largest battle in GA and a Union defeat", correct: true }, { text: "Sherman's greatest victory", correct: false }], highlightTerm: "Battle of Chickamauga" },
        { question: "What mistake did the South make after Chickamauga?", reference: "AKS 35.b: Key Battles", answers: [{ text: "They surrendered", correct: false }, { text: "Failed to push North out of Chattanooga", correct: true }, { text: "They retreated to Atlanta", correct: false }], highlightTerm: "failed to follow through" },
        { question: "What was the goal of Sherman's Atlanta Campaign?", reference: "AKS 35.b: Sherman's Campaigns", answers: [{ text: "To find gold", correct: false }, { text: "To capture the railroad hub and weaken the South", correct: true }, { text: "To rebuild the city", correct: false }], highlightTerm: "capture the city of Atlanta" },
        { question: "How did Sherman's victory in Atlanta impact the 1864 election?", reference: "AKS 35.b: Sherman's Campaigns", answers: [{ text: "Lincoln lost", correct: false }, { text: "It assured Lincoln's victory", correct: true }, { text: "It had no effect", correct: false }], highlightTerm: "assured Lincoln a victory" },
        { question: "What was the goal of Sherman's March to the Sea?", reference: "AKS 35.b: Sherman's Campaigns", answers: [{ text: "To reach the beach", correct: false }, { text: "Break Southerners' will to fight and destroy infrastructure", correct: true }, { text: "To recruit soldiers", correct: false }], highlightTerm: "Break the Southerners' will" },
        { question: "Why didn't Sherman destroy Savannah?", reference: "AKS 35.b: Sherman's Campaigns", answers: [{ text: "He ran out of ammo", correct: false }, { text: "He gave it to Lincoln as a Christmas gift", correct: true }, { text: "The Confederate army stopped him", correct: false }], highlightTerm: "Christmas gift" },
        { question: "What was Andersonville Prison?", reference: "AKS 35.b: Andersonville", answers: [{ text: "A Union fort", correct: false }, { text: "A Confederate POW camp for Union soldiers", correct: true }, { text: "A hospital", correct: false }], highlightTerm: "Confederate prison camp" },
        { question: "Why was Captain Henry Wirz executed?", reference: "AKS 35.b: Andersonville", answers: [{ text: "For treason", correct: false }, { text: "For war crimes due to conditions at Andersonville", correct: true }, { text: "For losing a battle", correct: false }], highlightTerm: "executed for war crimes" }
    ],
    studyGuideHTML: `
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="bg-blue-100 p-4 rounded-lg space-y-3 text-sm">
                <h3 class="font-bold text-blue-800 text-lg">AKS 35.a: Causes of Civil War</h3>
                <p class="text-gray-700"><strong>Slavery:</strong> South wanted expansion for <strong>profits and wealth</strong> (cheap labor). North wanted it <strong>limited or abolished</strong>.</p>
                <p class="text-gray-700"><strong>States' Rights:</strong> South believed they could <strong>ignore federal laws</strong>. North believed <strong>Federal laws take priority</strong> (Federalism).</p>
                <p class="text-gray-700"><strong>Nullification:</strong> Belief states could declare federal laws <strong>null and void (invalidate)</strong>.</p>
                <p class="text-gray-700"><strong>Compromise of 1850:</strong> <strong>California</strong> entered as free. Fugitive Slave Law: North must return runaway slaves.</p>
                <p class="text-gray-700"><strong>Georgia Platform:</strong> Led by <strong>Alexander Stephens</strong>, GA agreed to Compromise of 1850 to save the Union.</p>
                <p class="text-gray-700"><strong>Dred Scott:</strong> Court ruled <strong>Slaves are property</strong> and not citizens.</p>
            </div>
            <div class="bg-green-100 p-4 rounded-lg space-y-3 text-sm">
                <h3 class="font-bold text-green-800 text-lg">AKS 35.a: Secession</h3>
                <p class="text-gray-700"><strong>Election of 1860:</strong> Lincoln won. South feared he would end slavery. Result: <strong>Southern slave states seceded</strong>.</p>
                <p class="text-gray-700"><strong>Debate:</strong> <strong>Small farmers</strong> and Alexander Stephens opposed secession. Plantation owners supported it.</p>
            </div>
            <div class="bg-yellow-100 p-4 rounded-lg space-y-3 text-sm">
                <h3 class="font-bold text-yellow-800 text-lg">AKS 35.b: Civil War Strategies</h3>
                <p class="text-gray-700"><strong>South:</strong> <strong>King Cotton diplomacy</strong> (trade for supplies).</p>
                <p class="text-gray-700"><strong>North:</strong> <strong>Anaconda Plan</strong> (naval blockade to strangle trade).</p>
                <p class="text-gray-700"><strong>Emancipation Proclamation:</strong> Issued after <strong>Antietam</strong>. Freed slaves in rebelling states. Hard to enforce.</p>
                <p class="text-gray-700"><strong>Gettysburg:</strong> Turning point. 3-day battle.</p>
            </div>
            <div class="bg-red-100 p-4 rounded-lg space-y-3 text-sm">
                <h3 class="font-bold text-red-800 text-lg">AKS 35.b: Key Events in GA</h3>
                <p class="text-gray-700"><strong>Chickamauga:</strong> Largest battle in GA. Union defeat. South <strong>failed to follow through</strong>.</p>
                <p class="text-gray-700"><strong>Atlanta Campaign:</strong> Sherman captured the RR hub. <strong>Assured Lincoln a victory</strong> in 1864.</p>
                <p class="text-gray-700"><strong>March to the Sea:</strong> Destroyed infrastructure to <strong>break the Southerners' will</strong>. Savannah saved as a <strong>Christmas gift</strong>.</p>
                <p class="text-gray-700"><strong>Andersonville:</strong> Brutal POW camp. Commander Wirz <strong>executed for war crimes</strong>.</p>
            </div>
        </div>`
}
            };
            
            // --- DOM Element Selection ---
            const mainMenuScreen = document.getElementById('main-menu-screen');
            const quizScreen = document.getElementById('quiz-screen');
            const endScreen = document.getElementById('end-screen');
            const brainBreakScreen = document.getElementById('brain-break-screen');
            const roundSummaryScreen = document.getElementById('round-summary-screen');
            const breakCanvas = document.getElementById('break-canvas');
            const breakInstructions = document.getElementById('break-instructions');
            const timerDisplay = document.getElementById('timer-display');
            const resumeQuizBtn = document.getElementById('resume-quiz-btn');
            const studyGuideContent = document.getElementById('study-guide-content');
            const nextBtn = document.getElementById('next-btn');
            const infoBtn = document.getElementById('info-btn');
            const soundToggleBtn = document.getElementById('sound-toggle');
            const soundOnIcon = document.getElementById('sound-on-icon');
            const soundOffIcon = document.getElementById('sound-off-icon');
            const questionCounterDisplay = document.getElementById('question-counter-display');
            const scoreEl = document.getElementById('score');
            const questionContainer = document.getElementById('question-container');
            const questionReferenceEl = document.getElementById('question-reference');
            const answerButtonsEl = document.getElementById('answer-buttons');
            const feedbackEl = document.getElementById('feedback');
            const finalScoreEl = document.getElementById('final-score');
            const endMessageEl = document.getElementById('end-message');
            const confettiCanvas = document.getElementById('confetti-canvas');
            const confettiCtx = confettiCanvas.getContext('2d');
            const correctSound = document.getElementById('correct-sound');
            const incorrectSound = document.getElementById('incorrect-sound');
            const unitSelectionContainer = document.getElementById('unit-selection');
            const finalExamBtn = document.getElementById('final-exam-btn');
            const resumeExamBtn = document.getElementById('resume-exam-btn');
            const finalExamHighScore = document.getElementById('final-exam-high-score');
            const floatingTitle = document.getElementById('floating-title');
            const unitTitleText = document.getElementById('unit-title-text');
            const studyGuideModal = document.getElementById('study-guide-modal');
            const modalTitle = document.getElementById('modal-title');
            const studyGuideModalContent = document.getElementById('study-guide-modal-content');
            const closeModalBtn = document.getElementById('close-modal-btn');
            const backToMenuBtn = document.getElementById('back-to-menu-btn');
            const backToMenuBtnQuiz = document.getElementById('back-to-menu-btn-quiz');
            const continueRoundBtn = document.getElementById('continue-round-btn');
            const saveQuitBtn = document.getElementById('save-quit-btn');
            
            // --- Game State Variables ---
            let shuffledQuestions, currentQuestionIndex;
            let score = 0;
            let questionsSinceBreak = 0;
            let questionsAnsweredFirstTry = 0;
            let brainBreakCounter = 0;
            let soundsEnabled = true;
            let confettiPieces = [];
            let advanceTimeout = null;
            let breakTimerInterval = null;
            let animationFrameId;
            const correctEmojis = ['ðŸŽ‰', 'ðŸ¥³', 'ðŸ¤©', 'ðŸ‘', 'ðŸ’¯', 'âœ¨', 'ðŸš€', 'â­', 'ðŸ†'];
            let currentBreakListeners = [];
            let currentUnitId = null;
            let totalOriginalQuestions = 0;
            const BATCH_SIZE = 20;

             // --- Cookie & LocalStorage Helper Functions ---
            function setCookie(name, value, days) { let expires = ""; if (days) { const date = new Date(); date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000)); expires = "; expires=" + date.toUTCString(); } document.cookie = name + "=" + (value || "") + expires + "; path=/; SameSite=Lax"; }
            function getCookie(name) { const nameEQ = name + "="; const ca = document.cookie.split(';'); for (let i = 0; i < ca.length; i++) { let c = ca[i]; while (c.charAt(0) == ' ') c = c.substring(1, c.length); if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length); } return null; }
            
            function saveExamProgress() {
                const state = {
                    currentUnitId: 'final_exam',
                    questions: shuffledQuestions,
                    index: currentQuestionIndex,
                    score: score,
                    total: totalOriginalQuestions,
                    answeredFirstTry: questionsAnsweredFirstTry
                };
                localStorage.setItem('ss_review_game_state', JSON.stringify(state));
            }

            function clearExamProgress() {
                localStorage.removeItem('ss_review_game_state');
            }

            function loadExamProgress() {
                const saved = localStorage.getItem('ss_review_game_state');
                return saved ? JSON.parse(saved) : null;
            }

            // --- UI Population and Navigation ---
             function populateMainMenu() {
                unitSelectionContainer.innerHTML = '';
                
                // Check for saved exam state
                const savedState = loadExamProgress();
                if (savedState) {
                    resumeExamBtn.classList.remove('hidden');
                    resumeExamBtn.innerHTML = `Resume Final Exam (Question ${savedState.index + 1})`;
                } else {
                    resumeExamBtn.classList.add('hidden');
                }

                for (const unitId in gameData) {
                    const unit = gameData[unitId];
                    const unitContainer = document.createElement('div');
                    unitContainer.classList.add('p-4', 'rounded-lg', 'bg-white', 'shadow', 'grid', 'grid-cols-[minmax(0,_1fr)_auto_auto]', 'gap-4', 'items-center');
                    
                    const titleAndScore = document.createElement('div');
                    titleAndScore.classList.add('text-left');
                    const title = document.createElement('h2');
                    title.textContent = unit.title;
                    title.classList.add('text-xl', 'font-bold', 'text-gray-800');
                    titleAndScore.appendChild(title);
                    const highScoreDisplay = document.createElement('p');
                    const highScore = getCookie(`highScore_${unitId}`) || 0;
                    highScoreDisplay.innerHTML = `High Score: <span class="font-bold">${highScore}%</span>`;
                    highScoreDisplay.classList.add('text-sm', 'text-gray-500');
                    titleAndScore.appendChild(highScoreDisplay);
                    unitContainer.appendChild(titleAndScore);
                    
                    const guideButton = document.createElement('button');
                    guideButton.title = `View Study Guide for ${unit.title}`;
                    guideButton.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-2M9 5a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2M9 5a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01" /></svg>`;
                    guideButton.classList.add('p-2', 'rounded-full', 'bg-blue-100', 'text-blue-600', 'hover:bg-blue-200', 'transition-all', 'duration-200', 'transform', 'hover:scale-110', 'justify-self-center');
                    guideButton.onclick = () => showStudyGuideModal(unitId);
                    unitContainer.appendChild(guideButton);

                    const startButton = document.createElement('button');
                    startButton.title = `Start Quiz for ${unit.title}`;
                    startButton.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" /><path stroke-linecap="round" stroke-linejoin="round" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>`;
                    startButton.classList.add('p-2', 'rounded-full', 'bg-green-100', 'text-green-600', 'hover:bg-green-200', 'transition-all', 'duration-200', 'transform', 'hover:scale-110', 'justify-self-center');
                    startButton.onclick = () => startGame(unitId);
                    unitContainer.appendChild(startButton);

                    unitSelectionContainer.appendChild(unitContainer);
                }
                const finalExamScore = getCookie('highScore_final_exam');
                if (finalExamScore) {
                    finalExamHighScore.classList.remove('hidden');
                    finalExamHighScore.querySelector('span').textContent = `${finalExamScore}%`;
                }
            }

            function showStudyGuideModal(unitId) {
                const unit = gameData[unitId];
                modalTitle.textContent = unit.title;
                studyGuideModalContent.innerHTML = unit.studyGuideHTML;
                studyGuideModal.classList.remove('hidden');
            }
            
            function showMainMenu() {
                mainMenuScreen.classList.remove('hidden');
                quizScreen.classList.add('hidden');
                endScreen.classList.add('hidden');
                roundSummaryScreen.classList.add('hidden');
                floatingTitle.classList.add('hidden');
                if(animationFrameId) cancelAnimationFrame(animationFrameId);
                if(breakTimerInterval) clearInterval(breakTimerInterval);
                populateMainMenu(); // Refresh menu to show resume button state
            }
            
            // --- Game Logic ---
            function startGame(unitId, isResume = false) {
                currentUnitId = unitId;
                let questions;
                let studyGuideHTML;

                mainMenuScreen.classList.add('hidden');
                quizScreen.classList.remove('hidden');
                floatingTitle.classList.remove('hidden');

                if (isResume) {
                     const savedState = loadExamProgress();
                     if (savedState) {
                        shuffledQuestions = savedState.questions;
                        currentQuestionIndex = savedState.index;
                        score = savedState.score;
                        totalOriginalQuestions = savedState.total;
                        questionsAnsweredFirstTry = savedState.answeredFirstTry || 0;
                        questionsSinceBreak = 0;
                        unitTitleText.textContent = "Final Exam (Resumed)";
                        
                        // Populate study guide for all units in resume mode
                        studyGuideHTML = Object.values(gameData).map(unit => `<div><h2 class="text-2xl font-bold mt-4">${unit.title}</h2>${unit.studyGuideHTML}</div>`).join('');
                        document.getElementById('study-guide-content').innerHTML = studyGuideHTML;
                        
                        scoreEl.innerText = score;
                        setNextQuestion();
                        return;
                     }
                }

                if (unitId === 'final_exam') {
                    // Flatten questions and tag them with their Unit title
                    questions = [];
                    Object.values(gameData).forEach(unit => {
                        const unitLabel = unit.title.split(':')[0]; // e.g. "Unit 1"
                        unit.questions.forEach(q => {
                            questions.push({
                                ...q,
                                unitLabel: unitLabel
                            });
                        });
                    });
                    studyGuideHTML = Object.values(gameData).map(unit => `<div><h2 class="text-2xl font-bold mt-4">${unit.title}</h2>${unit.studyGuideHTML}</div>`).join('');
                    unitTitleText.textContent = "Final Exam (All Units)";
                    
                    // Clear any old progress when starting new
                    clearExamProgress();
                } else {
                    questions = gameData[unitId].questions;
                    studyGuideHTML = gameData[unitId].studyGuideHTML;
                    unitTitleText.textContent = gameData[unitId].title;
                }

                document.getElementById('study-guide-content').innerHTML = studyGuideHTML;

                shuffledQuestions = JSON.parse(JSON.stringify(questions)).sort(() => Math.random() - 0.5);
                totalOriginalQuestions = shuffledQuestions.length;
                currentQuestionIndex = 0;
                score = 0;
                questionsSinceBreak = 0;
                questionsAnsweredFirstTry = 0;
                brainBreakCounter = 0;
                scoreEl.innerText = score;
                setNextQuestion();
            }
            
            function setNextQuestion() {
                resetState();
                
                // Final Exam Batch Check
                if (currentUnitId === 'final_exam' && currentQuestionIndex > 0 && currentQuestionIndex % BATCH_SIZE === 0 && !advanceTimeout) {
                    showRoundSummary();
                    return;
                }

                if (currentQuestionIndex < shuffledQuestions.length) {
                    showQuestion(shuffledQuestions[currentQuestionIndex]);
                } else {
                    if (currentUnitId === 'final_exam') clearExamProgress();
                    showEndScreen();
                }
            }

            function showRoundSummary() {
                quizScreen.classList.add('hidden');
                roundSummaryScreen.classList.remove('hidden');
                
                const percentage = Math.round((score / currentQuestionIndex) * 100) || 0;
                
                document.getElementById('round-progress-text').innerText = `${currentQuestionIndex} / ${totalOriginalQuestions}`;
                document.getElementById('round-score-text').innerText = `${percentage}%`;
                
                // It's already saved by selectAnswer, but safe to save here too
                saveExamProgress();
            }
            
            function showQuestion(question) {
                if(question.isRetry){
                    questionCounterDisplay.innerHTML = `Question <span id="question-number">${questionsAnsweredFirstTry + 1}</span> of <span id="total-questions">${totalOriginalQuestions}</span> (Repeat)`;
                } else {
                    questionCounterDisplay.innerHTML = `Question <span id="question-number">${questionsAnsweredFirstTry + 1}</span> of <span id="total-questions">${totalOriginalQuestions}</span>`;
                }

                // Add Unit Label if it exists (Final Exam mode)
                let referenceText = question.reference;
                if (question.unitLabel) {
                    referenceText = `<span class="text-indigo-600 font-bold mr-2 border-r-2 border-gray-300 pr-2">${question.unitLabel}</span> ${question.reference}`;
                }
                questionReferenceEl.innerHTML = referenceText;

                questionContainer.innerHTML = ''; 
                const questionTextEl = document.createElement('h2');
                questionTextEl.innerText = question.question;
                questionTextEl.classList.add('text-xl', 'md:text-2xl', 'font-semibold', 'text-gray-800', 'flex-grow');
                const questionSpeakerBtn = createSpeakerButton(question.question);
                questionContainer.appendChild(questionTextEl);
                questionContainer.appendChild(questionSpeakerBtn);

                const shuffledAnswers = [...question.answers].sort(() => Math.random() - 0.5);
                const allAnswersShort = shuffledAnswers.every(answer => answer.text.length < 25);
                if (allAnswersShort) {
                    answerButtonsEl.classList.add('md:grid-cols-3');
                }

                shuffledAnswers.forEach(answer => {
                    const button = document.createElement('button');
                    button.classList.add('bg-white', 'hover:bg-blue-100', 'text-gray-800', 'font-semibold', 'py-3', 'px-5', 'rounded-lg', 'border', 'border-gray-300', 'transition', 'duration-200', 'w-full', 'flex', 'items-center', 'justify-between');

                    const answerTextSpan = document.createElement('span');
                    answerTextSpan.innerText = answer.text;
                    answerTextSpan.classList.add('text-left');

                    const answerSpeakerBtn = createSpeakerButton(answer.text);
                    
                    button.appendChild(answerTextSpan);
                    button.appendChild(answerSpeakerBtn);

                    if (answer.correct) {
                        button.dataset.correct = answer.correct;
                    }
                    button.addEventListener('click', selectAnswer);
                    answerButtonsEl.appendChild(button);
                });
            }

            function resetState() {
                if (advanceTimeout) {
                    clearTimeout(advanceTimeout);
                    advanceTimeout = null;
                }
                nextBtn.classList.add('hidden');
                feedbackEl.innerText = '';
                const highlightedSpan = studyGuideContent.querySelector('span.bg-yellow-200');
                if (highlightedSpan) {
                    studyGuideContent.innerHTML = studyGuideContent.innerHTML.replace(/<span class="bg-yellow-200 rounded font-bold px-1">/g, '').replace(/<\/span>/g, '');
                }
                studyGuideContent.classList.remove('expanded');
                answerButtonsEl.classList.remove('md:grid-cols-3');
                while (answerButtonsEl.firstChild) {
                    answerButtonsEl.removeChild(answerButtonsEl.firstChild);
                }
            }

            function selectAnswer(e) {
                const selectedBtn = e.currentTarget;
                const isCorrect = selectedBtn.dataset.correct === 'true';
                const currentQuestion = shuffledQuestions[currentQuestionIndex];

                if(!currentQuestion.isRetry) {
                    questionsAnsweredFirstTry++;
                }

                questionsSinceBreak++;

                if (isCorrect) {
                    if(soundsEnabled) correctSound.play();
                    if (!currentQuestion.isRetry) {
                        score++;
                    }
                    const randomEmoji = correctEmojis[Math.floor(Math.random() * correctEmojis.length)];
                    feedbackEl.innerText = `Correct! ${randomEmoji}`;
                    feedbackEl.classList.remove('text-red-500');
                    feedbackEl.classList.add('text-green-500');
                    triggerConfetti();
                    
                    // Delay next step to show feedback
                    advanceTimeout = setTimeout(() => {
                        currentQuestionIndex++;
                        
                        // Save Progress if in Final Exam Mode
                        if (currentUnitId === 'final_exam') {
                            saveExamProgress();
                        }

                        prepareNextStep();
                    }, 2500); 
                } else {
                    if(soundsEnabled) incorrectSound.play();
                    score--;
                    if (score < 0) score = 0;
                    feedbackEl.innerText = 'Incorrect! We\'ll try this one again later.';
                    feedbackEl.classList.remove('text-green-500');
                    feedbackEl.classList.add('text-red-500');
                    currentQuestion.isRetry = true;
                    shuffledQuestions.push(currentQuestion);
                    nextBtn.classList.remove('hidden'); 
                    
                    // On incorrect, we don't advance index yet, but save score update
                    if (currentUnitId === 'final_exam') {
                        saveExamProgress();
                    }
                }

                scoreEl.innerText = score;

                Array.from(answerButtonsEl.children).forEach(button => {
                    button.disabled = true;
                    button.classList.remove('hover:bg-blue-100');
                    if (button.dataset.correct) {
                        // Always highlight the correct answer in green
                        button.classList.remove('text-gray-800');
                        button.classList.add('flash-correct', 'bg-green-400', 'text-black', 'font-bold');
                    } else if (button === selectedBtn) {
                        // If an incorrect button was selected, highlight it in red
                        button.classList.add('flash-incorrect', 'bg-red-400', 'text-black', 'font-bold');
                    } else {
                        // Fade out other incorrect options
                        button.classList.add('bg-gray-300', 'text-gray-500', 'border-gray-400');
                    }
                });
                
                studyGuideContent.classList.add('expanded');
                const highlightTerm = currentQuestion.highlightTerm;

                if (highlightTerm) {
                    const escapedTerm = highlightTerm.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
                    const regex = new RegExp(`(${escapedTerm})`, 'gi');
                    studyGuideContent.innerHTML = studyGuideContent.innerHTML.replace(regex, `<span class="bg-yellow-200 rounded font-bold px-1">$1</span>`);
                }
                
                // Note: We increment currentQuestionIndex inside the timeout for correct answers
                // For incorrect answers, user must click Next, which calls prepareNextStep -> setNextQuestion
                // But we need to increment for incorrect manually if they hit "Next"
                nextBtn.onclick = () => {
                     currentQuestionIndex++;
                     if (currentUnitId === 'final_exam') saveExamProgress();
                     prepareNextStep();
                };
            }

            function showEndScreen() {
                quizScreen.classList.add('hidden');
                endScreen.classList.remove('hidden');
                
                const percentage = totalOriginalQuestions > 0 ? Math.round((score / totalOriginalQuestions) * 100) : 0;
                finalScoreEl.innerText = `${percentage}%`;
                
                const highScoreCookieName = `highScore_${currentUnitId}`;
                const highScore = parseInt(getCookie(highScoreCookieName)) || 0;
                
                if (percentage > highScore) {
                    setCookie(highScoreCookieName, percentage, 365);
                    if (percentage === 100) {
                        endMessageEl.innerText = "Wow! A new high score and a perfect game! ðŸ¤©";
                    } else {
                        endMessageEl.innerText = "New High Score! Can you get a perfect score next time? ðŸ¤”";
                    }
                } else {
                    if (percentage === 100) {
                        endMessageEl.innerText = "A perfect score! You're a genius! ðŸ†";
                    } else {
                        endMessageEl.innerText = `Good job! Your high score is still ${highScore}%. Try again to beat it! ðŸ’ª`;
                    }
                }
            }

            // --- Brain Breaks & Batches ---
             function prepareNextStep() {
                if (currentUnitId !== 'final_exam' && questionsSinceBreak > 0 && questionsSinceBreak % 6 === 0 && currentQuestionIndex < shuffledQuestions.length) {
                    showArtBreak();
                } else {
                    setNextQuestion();
                }
            }
            
            function showArtBreak() {
                quizScreen.classList.add('hidden');
                brainBreakScreen.classList.remove('hidden');
                
                const breakType = brainBreakCounter % 3; 
                cleanupBreakAnimation(); 

                switch(breakType) {
                    case 0:
                        setupBouncingBalls();
                        break;
                    case 1:
                        setupStarfield();
                        break;
                    case 2:
                        setupFollower();
                        break;
                }
                brainBreakCounter++;
                
                let timeLeft = 30;
                timerDisplay.textContent = `Time left: ${timeLeft}s`;
                breakTimerInterval = setInterval(() => {
                    timeLeft--;
                    timerDisplay.textContent = `Time left: ${timeLeft}s`;
                    if (timeLeft <= 0) {
                        resumeQuiz();
                    }
                }, 1000);
            }
            
            function resumeQuiz() {
                if(breakTimerInterval) clearInterval(breakTimerInterval);
                if(animationFrameId) cancelAnimationFrame(animationFrameId);
                breakTimerInterval = null;
                animationFrameId = null;
                
                cleanupBreakAnimation();

                brainBreakScreen.classList.add('hidden');
                quizScreen.classList.remove('hidden');
                setNextQuestion();
            }

            function cleanupBreakAnimation() {
                currentBreakListeners.forEach(({ event, handler }) => {
                    breakCanvas.removeEventListener(event, handler);
                });
                currentBreakListeners = [];
                breakCanvas.style.cursor = 'default';
                breakCanvas.style.backgroundColor = 'white';
            }

            function addBreakListener(event, handler) {
                breakCanvas.addEventListener(event, handler);
                currentBreakListeners.push({ event, handler });
            }
            
            function setupBouncingBalls() {
                breakInstructions.textContent = "Click a ball to pop it. Click empty space to add one.";
                breakCanvas.style.cursor = 'pointer';
                breakCanvas.style.backgroundColor = 'white';
                const breakCtx = breakCanvas.getContext('2d');
                let balls = [];
                const colors = ['#ef4444', '#f97316', '#eab308', '#84cc16', '#22c55e', '#14b8a6', '#3b82f6', '#8b5cf6', '#d946ef'];
                for(let i = 0; i < 15; i++) {
                    balls.push(createBall());
                }

                function createBall(x, y) {
                    return {
                        x: x || Math.random() * breakCanvas.width, 
                        y: y || Math.random() * breakCanvas.height,
                        vx: (Math.random() - 0.5) * 4, 
                        vy: (Math.random() - 0.5) * 4,
                        radius: Math.random() * 10 + 10, 
                        color: colors[Math.floor(Math.random() * colors.length)]
                    };
                }

                const ballClickHandler = (e) => {
                    const rect = breakCanvas.getBoundingClientRect();
                    const x = (e.clientX || e.touches[0].clientX) - rect.left;
                    const y = (e.clientY || e.touches[0].clientY) - rect.top;
                    let ballPopped = false;
                    for(let i = balls.length - 1; i >= 0; i--) {
                        const ball = balls[i];
                        const distance = Math.sqrt(Math.pow(x - ball.x, 2) + Math.pow(y - ball.y, 2));
                        if(distance < ball.radius) {
                            balls.splice(i, 1);
                            ballPopped = true;
                            break;
                        }
                    }
                    if(!ballPopped) {
                        balls.push(createBall(x,y));
                    }
                };
                addBreakListener('click', ballClickHandler);
                addBreakListener('touchstart', ballClickHandler);

                function animate() {
                    animationFrameId = requestAnimationFrame(animate);
                    breakCtx.clearRect(0, 0, breakCanvas.width, breakCanvas.height);
                    balls.forEach(ball => {
                        ball.x += ball.vx; ball.y += ball.vy;
                        if(ball.y + ball.vy > breakCanvas.height || ball.y + ball.vy < 0) ball.vy = -ball.vy;
                        if(ball.x + ball.vx > breakCanvas.width || ball.x + ball.vx < 0) ball.vx = -ball.vx;
                        breakCtx.beginPath();
                        breakCtx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2, false);
                        breakCtx.fillStyle = ball.color;
                        breakCtx.fill();
                        breakCtx.closePath();
                    });
                }
                animate();
            }

            function setupStarfield() {
                breakInstructions.textContent = "Move your mouse or finger to fly through space!";
                breakCanvas.style.cursor = 'crosshair';
                breakCanvas.style.backgroundColor = 'black';
                const breakCtx = breakCanvas.getContext('2d');
                const numStars = 500;
                let stars = [];
                let speed = 1.25;
                let centerX = breakCanvas.width / 2;
                let centerY = breakCanvas.height / 2;

                for (let i = 0; i < numStars; i++) {
                    stars[i] = {
                        x: (Math.random() - 0.5) * breakCanvas.width,
                        y: (Math.random() - 0.5) * breakCanvas.height,
                        z: Math.random() * breakCanvas.width
                    };
                }

                const starfieldHandler = (e) => {
                    const rect = breakCanvas.getBoundingClientRect();
                    centerX = (e.clientX || e.touches[0].clientX) - rect.left;
                    centerY = (e.clientY || e.touches[0].clientY) - rect.top;
                };

                addBreakListener('mousemove', starfieldHandler);
                addBreakListener('touchmove', (e) => { e.preventDefault(); starfieldHandler(e); });

                function animate() {
                    animationFrameId = requestAnimationFrame(animate);
                    breakCtx.fillStyle = "rgba(0, 0, 0, 0.2)";
                    breakCtx.fillRect(0, 0, breakCanvas.width, breakCanvas.height);
                    
                    for (let star of stars) {
                        star.z -= speed;
                        if (star.z <= 0) {
                            star.x = (Math.random() - 0.5) * breakCanvas.width;
                            star.y = (Math.random() - 0.5) * breakCanvas.height;
                            star.z = breakCanvas.width;
                        }

                        const k = 128 / star.z;
                        const px = star.x * k + centerX;
                        const py = star.y * k + centerY;

                        if (px >= 0 && px <= breakCanvas.width && py >= 0 && py <= breakCanvas.height) {
                            const size = (1 - star.z / breakCanvas.width) * 5;
                            breakCtx.beginPath();
                            breakCtx.arc(px, py, size, 0, Math.PI * 2);
                            breakCtx.fillStyle = 'white';
                            breakCtx.fill();
                        }
                    }
                }
                animate();
            }

            function setupFollower() {
                breakInstructions.textContent = "Move your mouse or finger!";
                breakCanvas.style.cursor = 'crosshair';
                breakCanvas.style.backgroundColor = 'white';
                const breakCtx = breakCanvas.getContext('2d');
                let trail = [];
                let hue = 0;
                const followerHandler = (e) => {
                    const rect = breakCanvas.getBoundingClientRect();
                    const x = (e.clientX || e.touches[0].clientX) - rect.left;
                    const y = (e.clientY || e.touches[0].clientY) - rect.top;
                    hue = (hue + 3) % 360;
                    trail.push({ x, y, size: 15, opacity: 1, color: `hsl(${hue}, 80%, 60%)`});
                    if(trail.length > 50) trail.shift();
                };
                addBreakListener('mousemove', followerHandler);
                addBreakListener('touchmove', (e) => { e.preventDefault(); followerHandler(e); });

                function animate() {
                    animationFrameId = requestAnimationFrame(animate);
                    breakCtx.fillStyle = 'rgba(255, 255, 255, 0.2)';
                    breakCtx.fillRect(0, 0, breakCanvas.width, breakCanvas.height);
                    trail.forEach(p => {
                        p.size *= 0.97;
                        breakCtx.beginPath();
                        breakCtx.arc(p.x, p.y, p.size, 0, 2 * Math.PI);
                        breakCtx.fillStyle = p.color;
                        breakCtx.fill();
                    });
                }
                animate();
            }

            // --- Effects & Audio ---
            function triggerConfetti() {
                const rect = confettiCanvas.parentElement.getBoundingClientRect();
                confettiCanvas.width = rect.width;
                confettiCanvas.height = rect.height;
                confettiPieces = [];
                for (let i = 0; i < 100; i++) {
                    confettiPieces.push(createConfettiPiece());
                }
                animateConfetti();
            }

            function createConfettiPiece() {
                const colors = ['#ef4444', '#f97316', '#eab308', '#84cc16', '#22c55e', '#14b8a6', '#06b6d4', '#3b82f6', '#8b5cf6', '#d946ef'];
                const x = confettiCanvas.width / 2;
                const y = confettiCanvas.height / 2;
                return { x: x, y: y, size: Math.random() * 8 + 5, color: colors[Math.floor(Math.random() * colors.length)], vx: (Math.random() - 0.5) * 10, vy: (Math.random() - 0.7) * 12, gravity: 0.3, opacity: 1, angle: Math.random() * Math.PI * 2, spin: (Math.random() - 0.5) * 0.2 };
            }

            function animateConfetti() {
                confettiCtx.clearRect(0, 0, confettiCanvas.width, confettiCanvas.height);
                let activePieces = false;
                confettiPieces.forEach(piece => {
                    if (piece.opacity > 0) {
                        activePieces = true;
                        piece.vy += piece.gravity;
                        piece.x += piece.vx;
                        piece.y += piece.vy;
                        piece.angle += piece.spin;
                        piece.opacity -= 0.01;
                        confettiCtx.save();
                        confettiCtx.globalAlpha = piece.opacity;
                        confettiCtx.translate(piece.x, piece.y);
                        confettiCtx.rotate(piece.angle);
                        confettiCtx.fillStyle = piece.color;
                        confettiCtx.fillRect(-piece.size / 2, -piece.size / 2, piece.size, piece.size);
                        confettiCtx.restore();
                    }
                });
                if (activePieces) requestAnimationFrame(animateConfetti);
                else confettiCtx.clearRect(0, 0, confettiCanvas.width, confettiCanvas.height);
            }
            
             function speakText(text) {
                if ('speechSynthesis' in window && soundsEnabled) {
                    window.speechSynthesis.cancel(); 
                    const utterance = new SpeechSynthesisUtterance(text);
                    window.speechSynthesis.speak( utterance);
                }
            }

            function createSpeakerButton(textToSpeak) {
                const button = document.createElement('button');
                button.classList.add('p-2', 'rounded-full', 'hover:bg-gray-200', 'transition-colors', 'duration-200', 'flex-shrink-0');
                button.innerHTML = `<svg class="w-6 h-6 text-gray-500 pointer-events-none" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"></path></svg>`;
                button.addEventListener('click', (e) => {
                    e.stopPropagation(); 
                    speakText(textToSpeak);
                });
                return button;
            }

            function generateAndSetAudio() {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                function createSound(frequency, duration, type = 'sine') {
                    const sampleRate = audioContext.sampleRate;
                    const numFrames = sampleRate * duration;
                    const buffer = audioContext.createBuffer(1, numFrames, sampleRate);
                    const data = buffer.getChannelData(0);
                    for (let i = 0; i < numFrames; i++) {
                        const time = i / sampleRate;
                        const envelope = Math.exp(-time / (duration / 4));
                        data[i] = Math.sin(2 * Math.PI * frequency * time) * envelope;
                    } return buffer;
                }
                function bufferToWave(buffer) {
                    const numOfChan = buffer.numberOfChannels, len = buffer.length * numOfChan * 2, bufferArr = new ArrayBuffer(44 + len), view = new DataView(bufferArr), channels = [], sampleRate = buffer.sampleRate;
                    let pos = 0;
                    function setUint16(data) { view.setUint16(pos, data, true); pos += 2; }
                    function setUint32(data) { view.setUint32(pos, data, true); pos += 4; }
                    setUint32(0x46464952); setUint32(36 + len); setUint32(0x45564157); setUint32(0x20746d66); setUint32(16); setUint16(1); setUint16(numOfChan); setUint32(sampleRate); setUint32(sampleRate * 2 * numOfChan); setUint16(numOfChan * 2); setUint16(16); setUint32(0x61746164); setUint32(len);
                    for (var i = 0; i < buffer.numberOfChannels; i++) channels.push(buffer.getChannelData(i));
                    while (pos < 44) view.setUint8(pos++, 0);
                    for (var i = 0; i < buffer.length; i++) {
                        for (var j = 0; j < numOfChan; j++) {
                            let s = Math.max(-1, Math.min(1, channels[j][i]));
                            view.setInt16(pos, s < 0 ? s * 0x8000 : s * 0x7FFF, true);
                            pos += 2;
                        }
                    } return new Blob([view], { type: 'audio/wav' });
                }
                const correctBuffer = audioContext.createBuffer(1, audioContext.sampleRate * 0.3, audioContext.sampleRate);
                const correctData = correctBuffer.getChannelData(0);
                for (let i = 0; i < correctData.length; i++) {
                    const time = i / audioContext.sampleRate;
                    correctData[i] = Math.sin(2 * Math.PI * 659.25 * time) * Math.exp(-time * 8) + Math.sin(2 * Math.PI * 880 * time) * Math.exp(-time * 6) * 0.5;
                }
                correctSound.src = URL.createObjectURL(bufferToWave(correctBuffer));
                
                const incorrectBuffer = createSound(220, 0.4);
                incorrectSound.src = URL.createObjectURL(bufferToWave(incorrectBuffer));
            }
            
            // --- Initialization ---
            function initialize() {
                populateMainMenu();
                finalExamBtn.addEventListener('click', () => startGame('final_exam'));
                backToMenuBtn.addEventListener('click', showMainMenu);
                backToMenuBtnQuiz.addEventListener('click', showMainMenu);
                saveQuitBtn.addEventListener('click', showMainMenu);
                continueRoundBtn.addEventListener('click', () => {
                    roundSummaryScreen.classList.add('hidden');
                    quizScreen.classList.remove('hidden');
                    setNextQuestion();
                });
                closeModalBtn.addEventListener('click', () => studyGuideModal.classList.add('hidden'));
                nextBtn.addEventListener('click', prepareNextStep);
                resumeQuizBtn.addEventListener('click', resumeQuiz);
                infoBtn.addEventListener('click', () => {
                    studyGuideContent.classList.toggle('expanded');
                });
                soundToggleBtn.addEventListener('click', () => {
                    soundsEnabled = !soundsEnabled;
                    soundOnIcon.classList.toggle('hidden');
                    soundOffIcon.classList.toggle('hidden');
                    setCookie('soundEnabled', soundsEnabled, 365);
                    if (!soundsEnabled) {
                        window.speechSynthesis.cancel();
                    }
                });

                const soundPreference = getCookie('soundEnabled');
                if (soundPreference === 'false') {
                    soundsEnabled = false;
                    soundOnIcon.classList.add('hidden');
                    soundOffIcon.classList.remove('hidden');
                }
                
                generateAndSetAudio();
            }

            initialize();
        });
    </script>
</body>
</html>
