<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anleigh's Social Studies Review</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root {
            --bg-gradient: radial-gradient(circle at top left, #ffb3ba, #ffdfba, #ffffba, #baffc9, #bae1ff, #d0baff);
            --glass-bg: rgba(255, 255, 255, 0.3);
            --glass-blur: blur(10px);
            --text-color: #2c3e50;
            --border-color: rgba(255, 255, 255, 0.5);
            --shadow-color: rgba(0, 0, 0, 0.1);
            --rainbow-gradient: linear-gradient(90deg, #ff0000, #ff7f00, #ffff00, #00ff00, #0000ff, #4b0082, #9400d3);
            --pink-purple-blue-gradient: linear-gradient(90deg, #ff007f, #bf00ff, #007fff);
        }

        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 2rem 1rem;
            min-height: 100vh;
            background-color: #ffb3ba;
            background-image: var(--bg-gradient);
            background-size: 400% 400%;
            animation: gradient-animation 20s ease infinite;
            color: var(--text-color);
            display: flex;
            justify-content: center;
            align-items: flex-start;
            box-sizing: border-box;
        }

        @keyframes gradient-animation {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .game-container {
            width: 100%;
            max-width: 900px;
            background: var(--glass-bg);
            backdrop-filter: var(--glass-blur);
            -webkit-backdrop-filter: var(--glass-blur);
            border-radius: 20px;
            border: 1px solid var(--border-color);
            box-shadow: 0 8px 32px 0 var(--shadow-color);
            padding: 2rem;
            text-align: center;
            box-sizing: border-box;
        }
        
        h1 {
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            color: #34495e;
        }

        h2 {
            font-size: 1.2rem;
            font-weight: 400;
            margin-top: 0;
            margin-bottom: 2rem;
            color: #34495e;
        }

        #main-menu, #quiz-screen, #brain-break-screen {
            display: none;
        }

        .unit-list-header, .unit-row {
            display: grid;
            grid-template-columns: 1fr 120px 120px;
            gap: 1rem;
            align-items: center;
            padding: 0.75rem 0;
            border-bottom: 1px solid var(--border-color);
        }

        .unit-list-header {
            font-weight: 600;
            color: #34495e;
            text-transform: uppercase;
            font-size: 0.9rem;
            letter-spacing: 0.5px;
        }
        
        .unit-title { text-align: left; }
        .unit-score { font-size: 0.9rem; }
        .unit-actions { display: flex; justify-content: center; gap: 0.5rem; }

        .icon-btn {
            background: rgba(255, 255, 255, 0.7);
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.2s ease;
            position: relative;
        }

        .icon-btn:hover {
            background: white;
            transform: scale(1.1);
        }
        
        .icon-btn svg { width: 20px; height: 20px; }

        .tooltip {
            position: absolute;
            background-color: #333;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.8rem;
            visibility: hidden;
            opacity: 0;
            transition: opacity 0.2s;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            white-space: nowrap;
            z-index: 10;
        }
        
        .icon-btn:hover .tooltip {
            visibility: visible;
            opacity: 1;
        }

        .btn {
            background-color: white;
            border: 1px solid var(--border-color);
            border-radius: 10px;
            padding: 1rem 1.5rem;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 1rem;
            box-sizing: border-box;
        }

        .btn-gradient-animated {
            background-size: 200% 100%;
            transition: background-position 0.5s ease;
            color: white;
        }
        
        .btn-gradient-animated:hover {
            background-position: -100% 0;
        }

        #final-exam-btn {
            background-image: var(--rainbow-gradient);
        }

        #next-question-btn {
            background-image: var(--rainbow-gradient);
            display: none;
        }

        #toggle-study-guide-btn {
            background-image: var(--pink-purple-blue-gradient);
        }

        .quiz-title-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            padding: 1rem;
            background: var(--glass-bg);
            backdrop-filter: var(--glass-blur);
            -webkit-backdrop-filter: var(--glass-blur);
            border-bottom: 1px solid var(--border-color);
            z-index: 5;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .quiz-title-bar h3 { margin: 0; font-size: 1.2rem; }
        
        .quiz-title-bar .btn-small {
            padding: 0.5rem 1rem;
            font-size: 0.9rem;
            border-radius: 8px;
            background: var(--glass-bg);
        }
        
        .quiz-title-bar .btn-small:hover { background: white; }

        .quiz-stats {
            margin-top: 80px; /* Space for title bar */
            display: flex;
            justify-content: space-between;
            margin-bottom: 2rem;
            font-size: 1.1rem;
            font-weight: 600;
        }

        #question-container {
            margin-bottom: 2rem;
            font-size: 1.4rem;
        }

        .speaker-icon {
            cursor: pointer;
            display: inline-block;
            margin-left: 10px;
            vertical-align: middle;
            color: #3498db;
        }
        
        .speaker-icon:hover { color: #2980b9; }

        .answer-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .answer-btn {
            background-color: rgba(255, 255, 255, 0.7);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            padding: 1rem;
            text-align: left;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
        }
        
        .answer-btn:hover { background-color: white; transform: translateY(-2px); }
        .answer-btn:disabled { cursor: not-allowed; opacity: 0.7; }
        .answer-btn .speaker-icon { margin-left: auto; }

        .answer-btn.correct {
            background-color: #2ecc71 !important;
            color: black !important;
            font-weight: bold;
            animation: flash-green 0.5s ease;
        }

        .answer-btn.incorrect {
            background-color: #e74c3c !important;
            color: white !important;
        }

        .answer-btn.disabled {
            background-color: #bdc3c7 !important;
            color: #7f8c8d !important;
        }

        @keyframes flash-green {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .in-quiz-study-guide {
            max-height: 0;
            overflow-y: auto;
            transition: max-height 0.5s ease-in-out;
            margin-top: 2rem;
            background: rgba(255, 255, 255, 0.5);
            padding: 0 1.5rem;
            border-radius: 10px;
        }
        
        .in-quiz-study-guide.show {
            max-height: 300px;
            padding: 1.5rem;
        }

        .highlight {
            background-color: yellow;
            font-weight: bold;
            padding: 2px 4px;
            border-radius: 3px;
        }
        
        .sound-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--glass-bg);
            border: 1px solid var(--border-color);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
        }

        footer {
            margin-top: 2rem;
            font-size: 0.8rem;
            color: var(--text-color);
            opacity: 0.7;
        }
        
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 101;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-content {
            background: var(--glass-bg);
            backdrop-filter: var(--glass-blur);
            -webkit-backdrop-filter: var(--glass-blur);
            margin: 5% auto;
            padding: 2rem;
            border: 1px solid var(--border-color);
            width: 90%;
            max-width: 800px;
            border-radius: 20px;
            position: relative;
            text-align: left;
        }
        
        .modal-content h3 {
            margin-top: 0;
            font-family: 'Playfair Display', serif;
        }
        
        .modal-body {
            max-height: 70vh;
            overflow-y: auto;
        }
        
        .close-btn {
            color: #aaa;
            position: absolute;
            top: 15px;
            right: 25px;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        
        .close-btn:hover, .close-btn:focus { color: #333; }
        
        /* Brain Break Styles */
        #brain-break-canvas {
            display: block;
            width: 100%;
            height: 400px;
            background-color: rgba(0,0,0,0.1);
            border-radius: 10px;
            cursor: crosshair;
        }
        
        #brain-break-timer {
            font-size: 2rem;
            font-weight: bold;
            margin: 1rem 0;
        }

        @media (max-width: 768px) {
            body { padding: 1rem 0.5rem; }
            .game-container { padding: 1.5rem; }
            h1 { font-size: 2rem; }
            .unit-list-header { display: none; }
            .unit-row {
                grid-template-columns: 1fr;
                gap: 0.5rem;
                padding: 1rem;
                border: 1px solid var(--border-color);
                border-radius: 10px;
                margin-bottom: 1rem;
            }
            .unit-title { font-weight: bold; }
            .unit-score, .unit-actions { text-align: center; }
            .answer-grid { grid-template-columns: 1fr; }
            .quiz-title-bar h3 { font-size: 1rem; }
        }
    </style>
</head>

<body>

    <div class="game-container">
        <!-- Main Menu Screen -->
        <div id="main-menu">
            <h1>Anleigh's Social Studies Review</h1>
            <h2>Choose a unit below to play a game!</h2>
            <div id="unit-selection">
                <div class="unit-list-header">
                    <div class="unit-title">Unit</div>
                    <div class="unit-score">High Score</div>
                    <div class="unit-actions">Actions</div>
                </div>
                <div id="unit-list"></div>
            </div>
            <button id="final-exam-btn" class="btn btn-gradient-animated">Final Exam</button>
        </div>

        <!-- Quiz Screen -->
        <div id="quiz-screen">
            <div class="quiz-title-bar">
                <h3 id="quiz-title">Unit Title</h3>
                <button id="back-to-menu-btn" class="btn-small">Back to Main Menu</button>
            </div>
            <div class="quiz-stats">
                <div id="question-counter">Question 1 of 10</div>
                <div id="score">Score: 0</div>
            </div>
            <div id="question-container">
                <p id="question-text"></p>
            </div>
            <div id="answer-grid" class="answer-grid"></div>
            <button id="next-question-btn" class="btn btn-gradient-animated">Next Question</button>
            <button id="toggle-study-guide-btn" class="btn btn-gradient-animated">Toggle Study Guide</button>
            <div id="in-quiz-study-guide" class="in-quiz-study-guide"></div>
        </div>
        
        <!-- Brain Break Screen -->
        <div id="brain-break-screen">
            <h2>Brain Break!</h2>
            <p>Time for a short break. Interact with the animation below!</p>
            <canvas id="brain-break-canvas"></canvas>
            <div id="brain-break-timer">30</div>
            <button id="continue-quiz-btn" class="btn">Continue Quiz</button>
        </div>
        
        <footer id="footer"></footer>
    </div>
    
    <!-- Study Guide Modal -->
    <div id="study-guide-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h3 id="modal-title">Study Guide</h3>
            <div id="modal-body" class="modal-body"></div>
        </div>
    </div>
    
    <!-- Sound Toggle -->
    <div id="sound-toggle" class="sound-toggle">
        <!-- SVG icons will be injected here by JS -->
    </div>

    <script>
        // --- DATA ---
        const gameData = {
            "unit1": {
                title: "Unit 1: The Preamble",
                studyGuideHTML: `
                    <h4>The Preamble to the U.S. Constitution</h4>
                    <p>The Preamble is the introduction to the United States Constitution. It outlines the goals and purposes of the government.</p>
                    <p><strong>"We the People of the United States,"</strong> - Establishes that the power of government comes from the people.</p>
                    <p><strong>"in Order to form a more perfect Union,"</strong> - To create a stronger, more unified country than existed under the Articles of Confederation.</p>
                    <p><strong>"establish Justice,"</strong> - To create a fair legal system with courts and laws that apply to everyone equally.</p>
                    <p><strong>"insure domestic Tranquility,"</strong> - To maintain peace and order within the country.</p>
                    <p><strong>"provide for the common defence,"</strong> - To protect the country from outside threats with a military.</p>
                    <p><strong>"promote the general Welfare,"</strong> - To support the well-being of citizens (e.g., through public health, safety, and education).</p>
                    <p><strong>"and secure the Blessings of Liberty to ourselves and our Posterity,"</strong> - To protect freedom for current and future generations.</p>
                    <p><strong>"do ordain and establish this Constitution for the United States of America."</strong> - Formally creates and enacts the Constitution.</p>`,
                questions: [
                    { question: "What does the phrase 'form a more perfect Union' mean?", answers: { a: "To create a stronger, more unified country", b: "To make the country geographically larger", c: "To have a perfect government with no flaws", d: "To establish trade with other nations" }, correct: "a", aks: "Preamble", studyGuideTerm: "more perfect Union" },
                    { question: "What is the purpose of 'establish Justice'?", answers: { a: "To create a fair legal system", b: "To appoint a king", c: "To make sure everyone is rich", d: "To build more courthouses" }, correct: "a", aks: "Preamble", studyGuideTerm: "establish Justice" },
                    { question: "How does the Constitution 'insure domestic Tranquility'?", answers: { a: "By maintaining peace and order within the country", b: "By ensuring everyone has a quiet home", c: "By controlling the weather", d: "By starting a national police force" }, correct: "a", aks: "Preamble", studyGuideTerm: "domestic Tranquility" },
                    { question: "What does 'provide for the common defence' mean?", answers: { a: "To protect the country from outside threats", b: "To provide lawyers for everyone", c: "To build fences around cities", d: "To defend the rights of the common person" }, correct: "a", aks: "Preamble", studyGuideTerm: "common defence" },
                    { question: "The goal to 'promote the general Welfare' means the government should:", answers: { a: "Support the well-being of its citizens", b: "Give welfare checks to everyone", c: "Control all businesses", d: "Promote generals in the army" }, correct: "a", aks: "Preamble", studyGuideTerm: "general Welfare" },
                    { question: "What does 'secure the Blessings of Liberty to ourselves and our Posterity' mean?", answers: { a: "Protect freedom for current and future generations", b: "Give blessings to new ships", c: "Make sure everyone has a statue of liberty", d: "Secure money for future generations" }, correct: "a", aks: "Preamble", studyGuideTerm: "Blessings of Liberty" }
                ]
            },
            "unit4": {
                title: "Unit 4: Georgia's Beginnings",
                studyGuideHTML: document.getElementById('unit-4-study-guide-content')?.innerHTML || `
                    <h3>Unit 4: Georgia's Beginnings and Colonization</h3>
                    <h4>8SS.D.31: Impact of European Exploration</h4>
                    <p><b>31.a: Mississippian Indians:</b> Lived in large villages with defensive structures. Practiced agriculture with <b>maize</b> (corn) as the main crop. Used bow and arrow and chert knives.</p>
                    <p><b>31.b: European Exploration:</b> <b>Spanish</b> sought 'God, Gold, and Glory'. <b>British</b> sought raw materials for <b>mercantilism</b> and a defensive buffer.</p>
                    <p><b>31.c: Spanish Contact:</b> <b>Hernando de Soto</b>'s exploration brought devastating <b>European diseases</b> that killed many natives. <b>Spanish Missions</b> were built on the barrier islands to convert Indians to Catholicism.</p>
                    <h4>8SS.E.32: Colonial Georgia</h4>
                    <p><b>32.a: Charter of 1732:</b> Georgia was founded for <b>Defense</b> (primary reason), Economics, and Philanthropy. The charter had many <b>restrictions</b>, banning Catholics, lawyers, and slavery.</p>
                    <p><b>32.b: Savannah's Founding:</b> A peaceful establishment due to the relationship between <b>James Oglethorpe</b>, Yamacraw chief <b>Tomochichi</b>, and interpreter <b>Mary Musgrove</b>.</p>
                    <p><b>32.c: Diverse Groups:</b> The colony was settled by <b>Jews</b> (including a doctor who saved the colony), <b>Salzburgers</b> (Protestant refugees from Austria), <b>Highland Scots</b> (skilled soldiers for defense), and <b>Malcontents</b> (colonists unhappy with the Trustees' rules).</p>
                    <p><b>32.d: Royal Colony:</b> After the Trustee Period, bans on <b>slavery</b> and alcohol were lifted. Land ownership rules were relaxed, and a Royal <b>Government</b> with a governor was established.</p>
                    <p><b>32.e: Colonial Economy (W.R.I.S.T.):</b> The primary goods were Wine, Rice, Indigo, <b>Silk</b> (from mulberry trees), and Tobacco.</p>
                `,
                questions: [
                    { question: "Which group of American Indians was living in Georgia at the time of first European contact?", answers: { a: "Mississippian", b: "Cherokee", c: "Creek", d: "Paleoindian" }, correct: "a", aks: "31.a", studyGuideTerm: "Mississippian" },
                    { question: "What was the dominant agricultural crop for the Mississippian Indians?", answers: { a: "Maize (corn)", b: "Tobacco", c: "Cotton", d: "Potatoes" }, correct: "a", aks: "31.a", studyGuideTerm: "maize" },
                    { question: "The Spanish reasons for exploration are often summarized as the '3 G's'. What are they?", answers: { a: "God, Gold, and Glory", b: "Guns, Germs, and Steel", c: "Georgia, Grains, and Grapes", d: "Government, Growth, and Greatness" }, correct: "a", aks: "31.b", studyGuideTerm: "Spanish" },
                    { question: "What was the primary economic policy that motivated British colonization?", answers: { a: "Mercantilism", b: "Capitalism", c: "Socialism", d: "Feudalism" }, correct: "a", aks: "31.b", studyGuideTerm: "mercantilism" },
                    { question: "Who led the first major Spanish expedition through Georgia?", answers: { a: "Hernando de Soto", b: "Christopher Columbus", c: "Ponce de Le√≥n", d: "James Oglethorpe" }, correct: "a", aks: "31.c", studyGuideTerm: "Hernando de Soto" },
                    { question: "What was the most significant negative impact of European contact on the American Indians?", answers: { a: "Death from new diseases brought by the Europeans", b: "The introduction of new weapons", c: "Forced conversion to a new religion", d: "Loss of trade partners" }, correct: "a", aks: "31.c", studyGuideTerm: "European diseases" },
                    { question: "Where did the Spanish establish their missions in Georgia?", answers: { a: "Along the barrier islands", b: "In the northern mountains", c: "Near the city of Atlanta", d: "Along the Chattahoochee River" }, correct: "a", aks: "31.c", studyGuideTerm: "Spanish Missions" },
                    { question: "What was the primary reason for the founding of the Georgia colony according to the Charter of 1732?", answers: { a: "Defense (to act as a buffer for South Carolina)", b: "Philanthropy (to help debtors)", c: "Economics (to grow cotton)", d: "Religious freedom for Catholics" }, correct: "a", aks: "32.a", studyGuideTerm: "Defense" },
                    { question: "Which of the following groups was NOT banned from the Georgia colony by the Charter of 1732?", answers: { a: "Jews", b: "Lawyers", c: "Catholics", d: "Liquor dealers" }, correct: "a", aks: "32.a", studyGuideTerm: "restrictions" },
                    { question: "The acronym W.R.I.S.T. helps remember the crops Georgia was supposed to produce. What does the 'S' stand for?", answers: { a: "Silk", b: "Squash", c: "Sugarcane", d: "Sunflowers" }, correct: "a", aks: "32.e", studyGuideTerm: "Silk" },
                    { question: "Who was the Yamacraw chief who granted James Oglethorpe the land for Savannah?", answers: { a: "Tomochichi", b: "Pocahontas", c: "Sequoyah", d: "Sitting Bull" }, correct: "a", aks: "32.b", studyGuideTerm: "Tomochichi" },
                    { question: "Who served as the vital interpreter between Oglethorpe and the Yamacraw Indians?", answers: { a: "Mary Musgrove", b: "Samuel Nunes", c: "King George II", d: "Hernando de Soto" }, correct: "a", aks: "32.b", studyGuideTerm: "Mary Musgrove" },
                    { question: "Why was the arrival of the Jewish settlers in 1733 important for the colony?", answers: { a: "Their group included a doctor who helped save the colonists from a deadly sickness.", b: "They were the wealthiest group to arrive in Georgia.", c: "They were expert farmers who taught the colonists how to grow rice.", d: "They provided military defense against the Spanish." }, correct: "a", aks: "32.c", studyGuideTerm: "Jews" },
                    { question: "The Salzburgers were Protestant refugees from which country?", answers: { a: "Austria", b: "Scotland", c: "Spain", d: "England" }, correct: "a", aks: "32.c", studyGuideTerm: "Salzburgers" },
                    { question: "Which group of settlers was recruited specifically for their military skills to defend Georgia?", answers: { a: "Highland Scots", b: "Salzburgers", c: "Malcontents", d: "Jews" }, correct: "a", aks: "32.c", studyGuideTerm: "Highland Scots" },
                    { question: "What were the 'Malcontents' unhappy about?", answers: { a: "The bans on slavery, rum, and land ownership rules.", b: "The friendly relationship with the Yamacraw Indians.", c: "The requirement to produce silk.", d: "The hot and humid Georgia climate." }, correct: "a", aks: "32.c", studyGuideTerm: "Malcontents" },
                    { question: "What major change regarding labor happened when Georgia transitioned to a Royal Colony?", answers: { a: "Slavery became legal.", b: "All work was done by paid laborers.", c: "Indentured servitude was outlawed.", d: "Colonists were no longer required to work." }, correct: "a", aks: "32.d", studyGuideTerm: "slavery" },
                    { question: "How did the government of Georgia change when it became a Royal Colony?", answers: { a: "A Royal Governor was appointed by the king and a limited self-government was introduced.", b: "James Oglethorpe was crowned king of Georgia.", c: "It became a direct democracy where all citizens voted on all laws.", d: "The Trustees were given even more power." }, correct: "a", aks: "32.d", studyGuideTerm: "Government" }
                ]
            }
        };

        // --- STATE ---
        let gameState = {
            currentScreen: 'main-menu',
            currentUnitId: null,
            score: 0,
            originalQuestionCount: 0,
            questionQueue: [],
            currentQuestionIndex: -1,
            questionsAnsweredCorrectly: 0,
            questionsAnsweredThisSession: 0,
            isRepeat: false,
            soundEnabled: true,
            highScores: {},
            brainBreakInterval: null,
            brainBreakTimer: 30,
        };

        // --- DOM ELEMENTS ---
        const mainMenu = document.getElementById('main-menu');
        const quizScreen = document.getElementById('quiz-screen');
        const brainBreakScreen = document.getElementById('brain-break-screen');
        const unitListContainer = document.getElementById('unit-list');
        const finalExamBtn = document.getElementById('final-exam-btn');
        const quizTitle = document.getElementById('quiz-title');
        const backToMenuBtn = document.getElementById('back-to-menu-btn');
        const questionCounter = document.getElementById('question-counter');
        const scoreDisplay = document.getElementById('score');
        const questionText = document.getElementById('question-text');
        const answerGrid = document.getElementById('answer-grid');
        const nextQuestionBtn = document.getElementById('next-question-btn');
        const toggleStudyGuideBtn = document.getElementById('toggle-study-guide-btn');
        const inQuizStudyGuide = document.getElementById('in-quiz-study-guide');
        const modal = document.getElementById('study-guide-modal');
        const modalTitle = document.getElementById('modal-title');
        const modalBody = document.getElementById('modal-body');
        const closeModalBtn = document.querySelector('.close-btn');
        const soundToggleBtn = document.getElementById('sound-toggle');
        const footer = document.getElementById('footer');

        // --- AUDIO ---
        const correctSound = new Audio('data:audio/wav;base64,UklGRl9vT19XQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YU'+Array(1e3).join('12121'));
        const incorrectSound = new Audio('data:audio/wav;base64,UklGRl9vT19XQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YWE'+Array(1e3).join('87878'));

        // --- ICONS ---
        const speakerIconSVG = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path></svg>`;
        const mutedIconSVG = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><line x1="23" y1="9" x2="17" y2="15"></line><line x1="17" y1="9" x2="23" y2="15"></line></svg>`;
        const clipboardIconSVG = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#34495e" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect></svg>`;
        const playIconSVG = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#2ecc71" stroke="#2c3e50" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>`;

        // --- INITIALIZATION ---
        function init() {
            loadState();
            setupEventListeners();
            showScreen('main-menu');
            generateBuildNumber();
        }

        function generateBuildNumber() {
            const now = new Date();
            const year = now.getFullYear().toString().slice(-2);
            const month = (now.getMonth() + 1).toString().padStart(2, '0');
            const day = now.getDate().toString().padStart(2, '0');
            footer.textContent = `MF Build: ${year}${month}${day}.1`;
        }

        function setupEventListeners() {
            finalExamBtn.addEventListener('click', () => startQuiz('finalExam'));
            backToMenuBtn.addEventListener('click', showMainMenu);
            nextQuestionBtn.addEventListener('click', nextQuestion);
            toggleStudyGuideBtn.addEventListener('click', toggleInQuizStudyGuide);
            closeModalBtn.addEventListener('click', () => modal.style.display = 'none');
            window.addEventListener('click', (event) => {
                if (event.target == modal) modal.style.display = 'none';
            });
            soundToggleBtn.addEventListener('click', toggleSound);
        }

        // --- STATE & STORAGE ---
        function saveState() {
            localStorage.setItem('socialStudiesGameState', JSON.stringify({
                highScores: gameState.highScores,
                soundEnabled: gameState.soundEnabled
            }));
        }

        function loadState() {
            const savedState = JSON.parse(localStorage.getItem('socialStudiesGameState'));
            if (savedState) {
                gameState.highScores = savedState.highScores || {};
                gameState.soundEnabled = typeof savedState.soundEnabled === 'boolean' ? savedState.soundEnabled : true;
            }
            updateSoundToggleIcon();
        }

        // --- SCREEN MANAGEMENT ---
        function showScreen(screenId) {
            mainMenu.style.display = 'none';
            quizScreen.style.display = 'none';
            brainBreakScreen.style.display = 'none';
            document.getElementById(screenId).style.display = 'block';
            gameState.currentScreen = screenId;
            
            if(screenId === 'main-menu') {
                renderMainMenu();
            }
        }
        
        function showMainMenu() {
            if (gameState.brainBreakInterval) {
                clearInterval(gameState.brainBreakInterval);
                gameState.brainBreakInterval = null;
            }
            if (window.brainBreakAnimationId) {
                cancelAnimationFrame(window.brainBreakAnimationId);
            }
            showScreen('main-menu');
        }
        
        // --- MAIN MENU ---
        function renderMainMenu() {
            unitListContainer.innerHTML = '';
            for (const unitId in gameData) {
                const unit = gameData[unitId];
                const highScore = gameState.highScores[unitId] || 0;

                const unitRow = document.createElement('div');
                unitRow.className = 'unit-row';
                unitRow.innerHTML = `
                    <div class="unit-title">${unit.title}</div>
                    <div class="unit-score">High Score: ${highScore}%</div>
                    <div class="unit-actions">
                        <button class="icon-btn view-guide-btn" data-unit-id="${unitId}">
                            ${clipboardIconSVG}
                            <span class="tooltip">View Study Guide for ${unit.title}</span>
                        </button>
                        <button class="icon-btn start-quiz-btn" data-unit-id="${unitId}">
                            ${playIconSVG}
                            <span class="tooltip">Start Quiz for ${unit.title}</span>
                        </button>
                    </div>
                `;
                unitListContainer.appendChild(unitRow);
            }
            
            // Add final exam score
            const highScore = gameState.highScores['finalExam'] || 0;
            const finalExamRow = document.createElement('div');
            finalExamRow.className = 'unit-row';
            finalExamRow.innerHTML = `<div></div><div class="unit-score">High Score: ${highScore}%</div><div></div>`
            finalExamBtn.insertAdjacentElement('beforebegin', finalExamRow);


            document.querySelectorAll('.start-quiz-btn').forEach(btn => {
                btn.addEventListener('click', (e) => startQuiz(e.currentTarget.dataset.unitId));
            });
            document.querySelectorAll('.view-guide-btn').forEach(btn => {
                btn.addEventListener('click', (e) => showStudyGuideModal(e.currentTarget.dataset.unitId));
            });
        }
        
        function showStudyGuideModal(unitId) {
            const unit = gameData[unitId];
            modalTitle.textContent = `Study Guide - ${unit.title}`;
            modalBody.innerHTML = unit.studyGuideHTML;
            modal.style.display = 'block';
        }

        // --- QUIZ LOGIC ---
        function startQuiz(unitId) {
            gameState.currentUnitId = unitId;
            let questions = [];
            let title = '';

            if (unitId === 'finalExam') {
                title = 'Final Exam';
                for (const id in gameData) {
                    questions = questions.concat(gameData[id].questions);
                }
            } else {
                questions = [...gameData[unitId].questions];
                title = gameData[unitId].title;
            }

            gameState.questionQueue = shuffleArray(questions);
            gameState.originalQuestionCount = gameState.questionQueue.length;
            gameState.score = 0;
            gameState.currentQuestionIndex = -1;
            gameState.questionsAnsweredCorrectly = 0;
            gameState.questionsAnsweredThisSession = 0;
            
            quizTitle.textContent = title;
            showScreen('quiz-screen');
            nextQuestion();
        }

        function nextQuestion() {
            // Check for Brain Break
            if (gameState.questionsAnsweredThisSession > 0 && gameState.questionsAnsweredThisSession % 6 === 0) {
                startBrainBreak();
                return;
            }
        
            gameState.currentQuestionIndex++;
            nextQuestionBtn.style.display = 'none';
            toggleStudyGuideBtn.style.display = 'block';
            inQuizStudyGuide.classList.remove('show');
            inQuizStudyGuide.innerHTML = '';


            if (gameState.currentQuestionIndex < gameState.questionQueue.length) {
                const questionData = gameState.questionQueue[gameState.currentQuestionIndex];
                gameState.isRepeat = questionData.isRepeat || false;
                displayQuestion(questionData);
            } else {
                endQuiz();
            }
        }
        
        function displayQuestion(questionData) {
            const repeatText = gameState.isRepeat ? " (Repeat)" : "";
            questionCounter.textContent = `Question ${gameState.questionsAnsweredCorrectly + 1} of ${gameState.originalQuestionCount}${repeatText}`;
            scoreDisplay.textContent = `Score: ${gameState.score}`;

            questionText.innerHTML = `${questionData.question} <small style="display: block; color: #555; margin-top: 5px;">(AKS: ${questionData.aks})</small> <span class="speaker-icon">${speakerIconSVG}</span>`;
            questionText.querySelector('.speaker-icon').onclick = () => readAloud(questionData.question);

            answerGrid.innerHTML = '';
            const shuffledAnswers = shuffleArray(Object.entries(questionData.answers));

            shuffledAnswers.forEach(([key, text]) => {
                const button = document.createElement('button');
                button.className = 'answer-btn';
                button.dataset.key = key;
                button.innerHTML = `<span>${text}</span> <span class="speaker-icon">${speakerIconSVG}</span>`;
                button.onclick = () => selectAnswer(key, button);
                button.querySelector('.speaker-icon').onclick = (e) => {
                    e.stopPropagation();
                    readAloud(text);
                };
                answerGrid.appendChild(button);
            });
        }
        
        function selectAnswer(selectedKey) {
            const questionData = gameState.questionQueue[gameState.currentQuestionIndex];
            const isCorrect = selectedKey === questionData.correct;
            
            disableAnswerButtons();
            
            gameState.questionsAnsweredThisSession++;

            if (isCorrect) {
                handleCorrectAnswer();
            } else {
                handleIncorrectAnswer();
            }

            // Show study guide related to this question
            showInQuizStudyGuide(questionData.studyGuideTerm);
        }
        
        function handleCorrectAnswer() {
            playSound(correctSound);
            triggerConfetti();

            const selectedBtn = Array.from(answerGrid.children).find(btn => btn.dataset.key === gameState.questionQueue[gameState.currentQuestionIndex].correct);
            selectedBtn.classList.add('correct');

            if (!gameState.isRepeat) {
                gameState.score++;
                gameState.questionsAnsweredCorrectly++;
            }
            
            setTimeout(nextQuestion, 3000);
        }
        
        function handleIncorrectAnswer() {
            playSound(incorrectSound);
            
            gameState.score = Math.max(0, gameState.score - 1);
            
            const questionToRepeat = { ...gameState.questionQueue[gameState.currentQuestionIndex], isRepeat: true };
            gameState.questionQueue.push(questionToRepeat);
            
            const correctKey = gameState.questionQueue[gameState.currentQuestionIndex].correct;
            
            Array.from(answerGrid.children).forEach(btn => {
                if(btn.dataset.key === correctKey) {
                    btn.classList.add('correct'); // Highlight correct answer
                } else {
                    btn.classList.add('disabled'); // Gray out incorrect
                }
            });

            nextQuestionBtn.style.display = 'block';
            toggleStudyGuideBtn.style.display = 'none';
        }

        function endQuiz() {
            const finalScorePercent = Math.round((gameState.score / gameState.originalQuestionCount) * 100);
            const currentHighScore = gameState.highScores[gameState.currentUnitId] || 0;
            
            let message = `Quiz Complete!\nYour Score: ${gameState.score} out of ${gameState.originalQuestionCount} (${finalScorePercent}%).`;

            if(finalScorePercent > currentHighScore) {
                gameState.highScores[gameState.currentUnitId] = finalScorePercent;
                message += `\n\nCongratulations! A new high score!`;
                saveState();
            }
            
            // Using a simple alert for now, can be replaced with a custom modal
            setTimeout(() => {
                alert(message);
                showMainMenu();
            }, 500);
        }

        // --- UI & UX ---
        function disableAnswerButtons() {
            Array.from(answerGrid.children).forEach(button => button.disabled = true);
        }
        
        function showInQuizStudyGuide(term) {
            const unitId = gameState.currentUnitId === 'finalExam' ? findUnitIdForQuestion(gameState.questionQueue[gameState.currentQuestionIndex]) : gameState.currentUnitId;
            if (!unitId) return;

            const unit = gameData[unitId];
            let studyGuideContent = unit.studyGuideHTML;
            
            if (term) {
                const regex = new RegExp(`\\b(${term})\\b`, 'gi');
                studyGuideContent = studyGuideContent.replace(regex, `<span class="highlight">$1</span>`);
            }
            
            inQuizStudyGuide.innerHTML = studyGuideContent;
            inQuizStudyGuide.classList.add('show');
            
            const highlightedElement = inQuizStudyGuide.querySelector('.highlight');
            if(highlightedElement) {
                highlightedElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }
        
        function toggleInQuizStudyGuide() {
            inQuizStudyGuide.classList.toggle('show');
        }

        function triggerConfetti() {
            confetti({
                particleCount: 150,
                spread: 70,
                origin: { y: 0.6 }
            });
        }
        
        function toggleSound() {
            gameState.soundEnabled = !gameState.soundEnabled;
            updateSoundToggleIcon();
            saveState();
        }
        
        function updateSoundToggleIcon() {
            soundToggleBtn.innerHTML = gameState.soundEnabled ? speakerIconSVG : mutedIconSVG;
        }

        function playSound(sound) {
            if (gameState.soundEnabled) {
                sound.currentTime = 0;
                sound.play();
            }
        }
        
        function readAloud(text) {
            if (gameState.soundEnabled && 'speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                speechSynthesis.cancel(); // Stop any previous speech
                speechSynthesis.speak(utterance);
            }
        }

        // --- UTILITIES ---
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }
        
        function findUnitIdForQuestion(question) {
            for (const unitId in gameData) {
                if (gameData[unitId].questions.some(q => q.question === question.question)) {
                    return unitId;
                }
            }
            return null;
        }
        
        // --- BRAIN BREAK ---
        const brainBreakCanvas = document.getElementById('brain-break-canvas');
        const brainBreakTimerDisplay = document.getElementById('brain-break-timer');
        const continueQuizBtn = document.getElementById('continue-quiz-btn');
        const bbCtx = brainBreakCanvas.getContext('2d');
        
        const brainBreakAnimations = [runBouncingBalls, runStarfield, runParticleTrail];
        let currentBrainBreakAnimation;

        function startBrainBreak() {
            showScreen('brain-break-screen');
            gameState.brainBreakTimer = 30;
            brainBreakTimerDisplay.textContent = gameState.brainBreakTimer;

            // Stop previous animation if any
            if (window.brainBreakAnimationId) {
                cancelAnimationFrame(window.brainBreakAnimationId);
            }

            // Start new random animation
            currentBrainBreakAnimation = brainBreakAnimations[Math.floor(Math.random() * brainBreakAnimations.length)];
            currentBrainBreakAnimation.init();


            gameState.brainBreakInterval = setInterval(() => {
                gameState.brainBreakTimer--;
                brainBreakTimerDisplay.textContent = gameState.brainBreakTimer;
                if (gameState.brainBreakTimer <= 0) {
                    endBrainBreak();
                }
            }, 1000);
            
            continueQuizBtn.onclick = endBrainBreak;
        }

        function endBrainBreak() {
            clearInterval(gameState.brainBreakInterval);
            gameState.brainBreakInterval = null;
            if (window.brainBreakAnimationId) {
                cancelAnimationFrame(window.brainBreakAnimationId);
            }
            showScreen('quiz-screen');
            nextQuestion(); // Proceed to the question after the break
        }
        
        // --- Brain Break Animations ---
        // Animation 1: Bouncing Balls
        const runBouncingBalls = {
            balls: [],
            init() {
                brainBreakCanvas.width = brainBreakCanvas.clientWidth;
                brainBreakCanvas.height = brainBreakCanvas.clientHeight;
                this.balls = [];
                for(let i = 0; i < 15; i++) this.createBall();
                brainBreakCanvas.onclick = (e) => this.handleClick(e);
                this.animate();
            },
            createBall(x = Math.random() * brainBreakCanvas.width, y = Math.random() * brainBreakCanvas.height) {
                 this.balls.push({
                    x, y,
                    radius: Math.random() * 20 + 10,
                    dx: (Math.random() - 0.5) * 4,
                    dy: (Math.random() - 0.5) * 4,
                    color: `hsl(${Math.random() * 360}, 70%, 60%)`
                });
            },
            handleClick(e) {
                const rect = brainBreakCanvas.getBoundingClientRect();
                const mouseX = e.clientX - rect.left;
                const mouseY = e.clientY - rect.top;
                let clickedOnBall = false;
                for(let i = this.balls.length - 1; i >= 0; i--) {
                    const ball = this.balls[i];
                    const dist = Math.hypot(mouseX - ball.x, mouseY - ball.y);
                    if (dist < ball.radius) {
                        this.balls.splice(i, 1);
                        clickedOnBall = true;
                    }
                }
                if (!clickedOnBall) this.createBall(mouseX, mouseY);
            },
            animate() {
                bbCtx.clearRect(0, 0, brainBreakCanvas.width, brainBreakCanvas.height);
                this.balls.forEach(ball => {
                    bbCtx.beginPath();
                    bbCtx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
                    bbCtx.fillStyle = ball.color;
                    bbCtx.fill();
                    
                    if (ball.x + ball.radius > brainBreakCanvas.width || ball.x - ball.radius < 0) ball.dx *= -1;
                    if (ball.y + ball.radius > brainBreakCanvas.height || ball.y - ball.radius < 0) ball.dy *= -1;
                    
                    ball.x += ball.dx;
                    ball.y += ball.dy;
                });
                window.brainBreakAnimationId = requestAnimationFrame(() => this.animate());
            }
        };

        // Animation 2: 3D Starfield
        const runStarfield = {
            stars: [],
            mouse: { x: 0, y: 0},
            init() {
                brainBreakCanvas.width = brainBreakCanvas.clientWidth;
                brainBreakCanvas.height = brainBreakCanvas.clientHeight;
                this.stars = [];
                for (let i = 0; i < 500; i++) {
                    this.stars.push({
                        x: Math.random() * brainBreakCanvas.width - brainBreakCanvas.width / 2,
                        y: Math.random() * brainBreakCanvas.height - brainBreakCanvas.height / 2,
                        z: Math.random() * brainBreakCanvas.width
                    });
                }
                brainBreakCanvas.onmousemove = (e) => {
                    const rect = brainBreakCanvas.getBoundingClientRect();
                    this.mouse.x = e.clientX - rect.left;
                    this.mouse.y = e.clientY - rect.top;
                };
                brainBreakCanvas.onclick = null;
                this.animate();
            },
            animate() {
                const width = brainBreakCanvas.width;
                const height = brainBreakCanvas.height;
                const centerX = width / 2;
                const centerY = height / 2;
                
                bbCtx.fillStyle = 'rgba(0, 0, 0, 0.8)';
                bbCtx.fillRect(0, 0, width, height);

                const focalLength = width;
                const mouseX = this.mouse.x - centerX;
                const mouseY = this.mouse.y - centerY;

                this.stars.forEach(star => {
                    star.z -= 1.25;
                    if (star.z <= 0) {
                        star.z = width;
                    }

                    const scale = focalLength / (focalLength + star.z);
                    const x = (star.x - mouseX) * scale + centerX;
                    const y = (star.y - mouseY) * scale + centerY;
                    const r = Math.max(0, scale * 2);

                    bbCtx.beginPath();
                    bbCtx.arc(x, y, r, 0, Math.PI * 2);
                    bbCtx.fillStyle = 'white';
                    bbCtx.fill();
                });
                window.brainBreakAnimationId = requestAnimationFrame(() => this.animate());
            }
        };

        // Animation 3: Particle Trail
        const runParticleTrail = {
            particles: [],
            mouse: { x: 0, y: 0 },
            hue: 0,
            init() {
                brainBreakCanvas.width = brainBreakCanvas.clientWidth;
                brainBreakCanvas.height = brainBreakCanvas.clientHeight;
                this.particles = [];
                this.hue = 0;
                brainBreakCanvas.onmousemove = (e) => {
                    const rect = brainBreakCanvas.getBoundingClientRect();
                    this.mouse.x = e.clientX - rect.left;
                    this.mouse.y = e.clientY - rect.top;
                };
                brainBreakCanvas.onclick = null;
                this.animate();
            },
            animate() {
                bbCtx.fillStyle = 'rgba(0,0,0,0.1)';
                bbCtx.fillRect(0, 0, brainBreakCanvas.width, brainBreakCanvas.height);
                this.hue++;

                for (let i = 0; i < 5; i++) {
                    this.particles.push({
                        x: this.mouse.x,
                        y: this.mouse.y,
                        size: Math.random() * 5 + 1,
                        speedX: Math.random() * 3 - 1.5,
                        speedY: Math.random() * 3 - 1.5,
                        color: `hsl(${this.hue}, 100%, 50%)`
                    });
                }
                
                for(let i = this.particles.length - 1; i >= 0; i--) {
                    const p = this.particles[i];
                    p.x += p.speedX;
                    p.y += p.speedY;
                    p.size -= 0.1;
                    
                    if (p.size <= 0.1) {
                        this.particles.splice(i, 1);
                    } else {
                        bbCtx.fillStyle = p.color;
                        bbCtx.beginPath();
                        bbCtx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                        bbCtx.fill();
                    }
                }
                window.brainBreakAnimationId = requestAnimationFrame(() => this.animate());
            }
        };


        // --- START GAME ---
        // Hidden div to load study guide content for JS
        const hiddenStudyGuide = document.createElement('div');
        hiddenStudyGuide.id = 'unit-4-study-guide-content';
        hiddenStudyGuide.style.display = 'none';
        hiddenStudyGuide.innerHTML = `
            <h3>Unit 4: Georgia's Beginnings and Colonization</h3>
            <h4>8SS.D.31: Evaluate the impact of European exploration and settlement on American Indians in Georgia</h4>
            <p><b>31.a: Characteristics of Mississippian Indians:</b> Lived in large villages with a central plaza, residential zones, and <b>defensive structures</b> like palisades and moats. They had a complex chiefdom society with elites and commoners and participated in a large trade network. Earthen mounds were used for religious, social, and burial purposes.</p>
            <p><b>Food:</b> Practiced large-scale agriculture, with <b>maize</b> (corn) as the main crop, supplemented by squash, sunflowers, and beans. They hunted deer, rabbit, and turkey, and also ate fish, turtles, fruits, and nuts.</p>
            <p><b>Weapons/Tools:</b> Their primary weapon was the bow and arrow. They used chert (sedimentary rock) knives and improved upon the stone tools of earlier groups.</p>
            <h4>31.b: Reasons for European Exploration</h4>
            <p><b>Spanish (The 3 G's):</b> God, Gold, and Glory.</p>
            <p><b>British:</b> Used colonies for <b>mercantilism</b> and to create a defensive buffer to protect profitable colonies from threats.</p>
            <h4>31.c: Impact of Spanish Contact</h4>
            <p><b>Hernando de Soto:</b> Led the first major European exploration of Georgia in the mid-1500s searching for gold.</p>
            <p><b>Impact on Natives:</b> Devastating due to <b>European diseases</b> like smallpox and influenza, which killed a vast number of Mississippian Indians.</p>
            <p><b>Spanish Missions:</b> Established along Georgia's barrier islands (Guale) to convert natives to Catholicism.</p>
            <h4>8SS.E.32: Analyze the colonial period of Georgia's history</h4>
            <p><b>32.a: The Charter of 1732:</b> Primary reason for settlement was <b>Defense</b>. Other reasons were Economics and Philanthropy. Had many <b>restrictions</b> (no Catholics, lawyers, liquor, slaves).</p>
            <p><b>32.b: Establishing Savannah:</b> A peaceful founding thanks to <b>James Oglethorpe</b>, chief <b>Tomochichi</b>, and interpreter <b>Mary Musgrove</b>.</p>
            <p><b>32.c: Diverse Groups:</b> Included <b>Jews</b> (Dr. Samuel Nunes), <b>Salzburgers</b> (Protestant refugees), <b>Highland Scots</b> (soldiers), and <b>Malcontents</b> (unhappy with rules).</p>
            <p><b>32.d: Transition to a Royal Colony:</b> The ban on <b>slavery</b> and alcohol was lifted. Land ownership was relaxed. A Royal <b>Government</b> was established.</p>
            <p><b>32.e: Goods and Services (W.R.I.S.T.):</b> Wine, Rice, Indigo, <b>Silk</b>, and Tobacco.</p>
        `;
        document.body.appendChild(hiddenStudyGuide);
        init();

    </script>
</body>

</html>
